var dependencies=["jquery","moment"],cdnList={china:{html5shiv:"https://cdn.bootcss.com/html5shiv/r29/html5.min.js",bootstrap:"https://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css",boorstrapTheme:"https://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap-theme.min.css",jquery:"https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js",momentWithLocales:"https://cdn.bootcss.com/moment.js/2.18.1/moment-with-locales.min.js"},world:{html5shiv:"https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js",bootstrap:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css",bootstrapTheme:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css",jquery:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js",momentWithLocales:"http://momentjs.com/downloads/moment-with-locales.min.js"}};function fixFloatingPointNumber(e,t){var n=new String(e);if(n.indexOf(".")<0)return n+"."+repeatString("0",t);var o=n.split(".");return o[1].length,o[1].length<t?o[1]+=repeatString("0",t-o[1].length):o[1].length>t&&(o[1]=o[1].substr(0,t)),o.join(".")}function getRandomInteger(e){return Math.floor(Math.random()*e)}function enableDebug(){try{return"object"==typeof sessionStorage&&(sessionStorage.setItem("debug","on"),!0)}catch(e){return!0}}var openDebug=enableDebug;function disableDebug(){try{return"object"==typeof sessionStorage&&(sessionStorage.setItem("debug","off"),!0)}catch(e){return!1}}var closeDebug=disableDebug;function getDebugStatus(){try{return"object"==typeof sessionStorage&&"on"===sessionStorage.getItem("debug")}catch(e){return!1}}function addConsoleLog(e){try{return"object"==typeof console&&(console.log(e),!0)}catch(e){return!1}}function addDebugLog(e){return!!getDebugStatus()&&(addConsoleLog("string"==typeof e?"[debug] "+e:e),!0)}var log=addDebugLog;function addErrorLog(e){return!!getDebugStatus()&&(addConsoleLog("[error] "+e),!0)}function alertDebugLog(e){return!!getDebugStatus()&&(alert("[debug] "+e),!0)}function addDebugInfo(e,t){var n=t||"info";if($("#debugInfoDialog").length){var o="<p>"+("["+n+"] "+e)+"</p>";$("#debugInfoDialog .infoContainer").append(o)}else addConsoleLog("[warnning] element: #debugInfoDialog not exist.")}function updateObject(e,t){for(var n in t)e[n]=t[n]}function printObject(e){var t=createElement("div"),n=createElement("ul");for(var o in e){var r=createElement("li");r.innerHTML=o+": "+e[o],n.appendChild(r)}t.appendChild(n),document.body.appendChild(t)}function cloneObject(e){var t=new Object;for(var n in e)t[n]=e[n];return t}function cloneArray(e){var t=new Array;for(var n in e)t[n]="object"==typeof e[n]?cloneArray(e[n]):e[n];return t}function mergeObject(e,t){var n,o=new Object;for(n in e)o[n]=e[n];for(n in t)o[n]=t[n];return o}function getObjectPropertyByKeyPath(e,t){if(""===t)return addConsoleLog("path can not be a empty string."),null;var n="string"==typeof t?t.split("."):t;if(void 0===e[n[0]])return null;var o=e[n[0]];return n.shift(),n.length?getObjectPropertyByKeyPath(o,n):o}function setObjectPropertyByKeyPath(e,t,n){if(""===t)return addConsoleLog("path can not be a empty string."),null;for(var o=t.split("."),r=e,a=0;a<o.length;a++){var i=o[a];a+1<o.length?(void 0===r[i]&&(r[i]={}),r=r[i]):r[i]=n}}function setDebuggingContent(e){"object"==typeof e&&(e=e.join("|"));try{return"object"==typeof sessionStorage&&sessionStorage.setItem("debugging_content",e)}catch(e){return!1}}function existDebuggingContent(e){try{if("object"!=typeof sessionStorage)return!1;var t=sessionStorage.getItem("debugging_content");return!!t&&inArray(e,t.split("|"))}catch(e){return!1}}function getBrowserFingerPrinting(){var e,t=document.createElement("canvas");if(void 0===t.getContext)return addConsoleLog("Not support browser finger printing on current browser."),"";try{e=t.getContext("2d")}catch(e){return addConsoleLog(e),""}var n="http://"+location.hostname;return e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline=location.hostname,e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(n,4,17),t.toDataURL()}function getPageDescription(){var e=document.getElementsByName("description");return e.length?e[0].content:""}var getPageDesc=getPageDescription;function getPageIcon(){var e=document.getElementsByName("icon");return e.length?e[0].href:""}function repeatString(e,t){for(var n="",o=1;o<=t;o++)n+=e;return n}function str_replace(e,t,n){if(t==n)return e;for(var o=new String(e);0<=o.indexOf(t);)o=o.replace(t,n);return o}function replaceData(e,t){for(var n in t)for(;0<=e.indexOf(n);)e=e.replace(n,t[n]);return e}function dataColumnConvert(e,t){var n={};for(var o in e)n[o]=e[o];for(var r in t)n[r]=n[t[r]],delete n[t[r]];return n}function listDataColumnConvert(e,t){for(var n=[],o=0;o<e.length;o++){var r=dataColumnConvert(e[o],t);n.push(r)}return n}function listDataFilter(e,t,n){for(var o=[],r=0;r<e.length;r++)e[r][t]===n&&o.push(e[r]);return o}function firstLetterUpperCase(e){return 0==e.length?e:e=e[0].toUpperCase()+e.substring(1,e.length)}function getRandomChineseName(){var e=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜"],t=["云","化","京","彦","小","志","书","健","思","嘉","明"],n=["腾","东","宏","龙","川","东","福","林","聪","诚","珠"];return e[Math.ceil(Math.random()*(e.length-1))]+t[Math.ceil(Math.random()*(t.length-1))]+n[Math.ceil(Math.random()*(n.length-1))]}function removeLineBreak(e){return e.replace(/[\r\n]/g,"")}function removeSpace(e){return e.replace(/\ +/g,"")}function removeHtmlTag(e){return e.replace(/<[^<>]+?>/g,"")}function filterImgTag(e){return new RegExp("<img[^>]*>").exec(e)}function filterImageUrlList(e){for(var t=$(e).find("img"),n=[],o=0;o<t.length;o++)n.push(t.eq(o).attr("src"));return n}function escapeHtml(e){return e.replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})}function EncodeHtml(e){return 0==e.length?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>")}function DecodeHtml(e){return 0==e.length?"":e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/<br\/>/g,"\n")}function removeSpaceInAheadOfLine(e){for(var t=typeof e,n="object"==t?e:[e],o=0;o<n.length;o++)n[o]=n[o].replace(new RegExp("^( )+"),"");return"object"==t?n:n[0]}function getObjectInListByKey(e,t,n){for(var o=0;o<e.length;o++){var r=e[o];if(void 0!==r[t]&&r[t]===n)return r}return null}function data2String(e){var t="";if("object"==typeof e){for(var n in e)t+=n+": "+e[n]+"  ";return t}if("array"!=typeof e)return e;for(n=0;n<e.length;n++)t+=e[n],n+1<e.length&&(t+=", ");return t}function BBCodeToStructuralData(e){if("undefined"!=typeof sceditor){var t={};return t.htmlCode=(new sceditor.BBCodeParser).toHTML(e),t.plainText=removeHtmlTag(t.htmlCode),t.imageList=filterImageUrlList(t.htmlCode),t}addConsoleLog("BBCodeToStructuralData require sceditor library.")}function setCurrentUrl(e){window.history.pushState({},"",e)}function createUrl(e,t){if("object"!=typeof t)return e;var n="";for(var o in t)n.length&&(n+="&"),n+=o+"="+t[o];return 0<=e.indexOf("?")?e+="&":e+="?",e+=n}function getUrlFileName(e){var t=e.split("/");return t[t.length-1]}function getBodyHtml(e){try{var t=e.split(/\<body[^\>]*\>/);if(t.length<2)return log("can not found string: /<body[^>]*>/"),!1;e=t[1].replace("</body>","")}catch(e){return log(e),!1}return e}function isRootPath(e){return e.lastIndexOf("/")==e.length-1&&(e=e.substr(0,e.length-1)),"/"==e||0==e.length}function getParentFolder(e){return e.lastIndexOf("/")==e.length-1&&(e=e.substr(0,e.length-1)),e.lastIndexOf("/")<0||0==e.lastIndexOf("/")?"":e.substr(0,e.lastIndexOf("/"))}function adjustUrl(e){for(var t=[],n=e.split("/"),o=0;o<n.length;o++)"."!==n[o]&&(".."===n[o]?t.pop():t.push(n[o]));return t.join("/")}function concatPath(e,t){return e.substr(-1,1),e+="/","/"===t.substr(0,1)&&(t=t.substr(1,t.length)),e+t}function simplifyPath(e){"./"==(e=e.split("/./").join("/")).substr(0,2)&&(e=e.substr(2,e.length));for(var t=new RegExp("([^/]*)/../");0<=e.search(t);)e=e.replace(t,"");return e}function getAbsoluteBaseUrl(){var e=location.protocol,t=location.hostname,n=location.port,o=e+"//"+t;return 80==n&&443==n||(o+=":"+n),o+="/"}function inArray(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function getIndexInArray(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function removeArrayElement(e,t){for(var n=new Array,o=0;o<e.length;o++)e[o]!=t&&n.push(e[o]);return n}function getItemInListById(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return e[n];return null}function getItemInListByColumn(e,t,n){for(var o=0;o<e.length;o++)if(e[o][t]===n)return e[o];return null}function getFreshText(e){try{return moment(e).fromNow()}catch(e){addConsoleLog(e)}return""}function formatTime(e,t){if(!t)return"";var n="object"==typeof t?t:new Date(t);return moment(n).format(e)}function getAMPM(e,t){switch(t||(t="YY-MM-dd HH:mm:ss"),typeof e){case"object":try{return e.getHours()<12?"am":"pm"}catch(e){addConsoleLog(e)}case"number":return new Date(e).getHours()<12?"am":"pm";case"string":var n=moment(e,t);return parseInt(n.format("H"))<12?"am":"pm"}return""}function formatTimeLength(e,t){!t&&(t={}),(t.integer||!1)&&(e=Math.floor(e));var n=e%60,o=Math.floor(e/60)%60,r=Math.floor(e/60/60),a="";return a=(10<=o?o:"0"+o)+(a=":"+(a=(10<=n?n:"0"+n)+a)),0<r&&(a=(10<=r?r:"0"+r)+(a=":"+a)),a}function parseTimeStructure(e){var t=e,n={},o=0;return o=t%1e3,n.SS=o<10?"0"+o:o+"",n.S=o+"",t-=o,o=(t=Math.floor(t/1e3))%60,n.ss=o<10?"0"+o:o+"",n.s=o+"",t-=o,o=(t=Math.floor(t/60))%60,n.mm=o<10?"0"+o:o+"",n.m=o+"",t-=o,o=t=Math.floor(t/60),n.HH=o<10?"0"+o:o+"",n.H=o+"",n}function printTime(t,n){n||(n=$(t).data("format")||"YYYY-MM-DD H:mm:ss"),setInterval(function(){try{var e=moment().format(n);$(t).html(e)}catch(e){addConsoleLog(e)}},1e3)}function getNowTime(e){return e||(e="YYYY-MM-DD HH:mm:ss"),moment().format(e)}function countBackwards(t,e){"object"!=typeof e&&(e={});var n=e.callback||null,o=(parseInt(t.innerHTML),setInterval(function(){try{var e=parseInt(t.innerHTML);e--,(t.innerHTML=e)<=0&&(clearInterval(o),n&&n(t))}catch(e){log(e)}},1e3))}function timeDrop(n,o,r){if("object"!=typeof r&&(r={}),"string"==typeof n&&(n=$(n).length?$(n)[0]:null),n){var a=r.format||"HH:mm:ss",i=r.callback||null;"string"==typeof o?o=parseInt(moment(o,a).format("x")):o instanceof Date&&(o=o.getTime());var s=0-moment().diff(new Date(o),"millisecond"),e=parseTimeStructure(s),t=replaceData(a,e);n.innerHTML=t;var l=null;l=window.setInterval(function(){var e=parseTimeStructure(s=0-moment().diff(new Date(o),"millisecond")),t=replaceData(a,e);n.innerHTML=t,s<=0&&(window.clearInterval(l),i&&i(n,s,r))},1)}}function setCountBackwards(e,t){if("undefined"==typeof $)return log("[error] missing $ function."),!1;var n=$(e);"object"!=typeof t&&(t={});var o=n.html();n.data("default",o);var r=t.process||n.data("process"),a=t.finish||n.data("finish"),i=t.callback||null,s=t.second||parseInt(n.data("second"))||60;if(s<=0)addConsoleLog("[error] setCountBackwards must give a second param.");else{log("second="+s);var l=null,u=function(){try{s--,n.html(r.replace("{n}",s)),s<=0&&(n.html(a),clearInterval(l),i&&i(e))}catch(e){log(e)}};u(),l=setInterval(u,1e3)}}function getElement(e){return document.getElementById(e)}function get(e){try{return"function"!=typeof document.querySelector?(addConsoleLog("querySelector is not supported in current client."),!1):document.querySelector(e)}catch(e){return!1}}function createElement(e,t,n){var o=document.createElement(e);if(null!==t)for(var r in t)o.setAttribute(r,t[r]);return"object"==typeof n?o.innerHTML=n.outerHTML:"string"==typeof n&&(o.innerHTML=n),o}function generateIdForElement(e,t){!e&&(e="element"),!t&&(t="_");for(var n=!0,o=1,r="";n&&o<=999;)n=null!=getElement(r=e+t+o),o++;return r}function getTargetDataByEvent(e,t){var n=e.currentTarget;return void 0!==n.dataset[t]?n.dataset[t]:""}function printTag(e,t,n){var o=createElement(e,t,n);document.writeln(o.outerHTML)}function printStylesheetLink(e){document.writeln('<link rel="stylesheet" href="'+e+'"/>')}function loadStylesheet(e){var t=createElement("link",{href:e,rel:"stylesheet"});return document.head.appendChild(t),t.href}function setElementMiddlePosition(e){if("string"==typeof e){var t=$(e);if(!t.length)return!1;e=t[0]}var n=e.parentNode;$(n).css("overflow","hidden"),$(e).css("overflow","hidden");var o=(n.offsetHeight-e.offsetHeight)/2;return $(e).css("margin-top",o+"px"),!0}function isCSSFile(e){return".css"==e.substr(-4)}function loadScript(e,t){t=t||{};var n=createElement("script",{src:e}),o=t.onload||function(){};return o&&(n.onload=o),document.body.appendChild(n),n.src}function execScript(url,callback){$.ajax(url,{dataType:"text",success:function(text){try{eval(text)}catch(e){callback(e,"")}callback&&callback(null,text)},error:function(e,t){callback&&callback({request:e,message:t},"")}})}function loadContent(e){var t=e.id||"",n=e.html||"",o=e.css||"",r=e.script||"",a=e.target||document.body,i=e.cache||!1,s=e.callback||null;if(!t)return addConsoleLog("[error] missing id param for loadContent function."),!1;if(!n)return addConsoleLog("[error] missing html param for loadContent function."),!1;var l="",u=function(){r&&loadScript(r),s&&s()},c=function(e){$.ajax({url:e,success:function(e){(l=e,i)&&setSessionData(t+"_html",l);$(a).append(l),u()},error:function(){setTimeout(function(){c(e)},5e3)}})};i&&(l=getSessionData(t+"_html")||"");return l?($(a).append(l),u()):c(n),o&&loadStylesheet(o),!0}function loadDataFromApiToObject(e,o,r,a,i){void 0===e.type&&(e.type=e.method||"get"),void 0===r&&(r=[]),e.success=function(e){if(0===r.length)updateObject(o,e);else for(var t=0;t<r.length;t++){var n=getObjectPropertyByKeyPath(e,a[t]);setObjectPropertyByKeyPath(o,r[t],n)}i&&i()},$.ajax(e)}function downloadFile(e){if(isIE()){var t=window.open(e);t.onload=function(){try{this.document.designMode="ON"}catch(e){addConsoleLog(e.message)}try{this.document.execCommand("SaveAs"),this.close()}catch(e){addConsoleLog(e.message)}};try{"complete"==t.document.readyState&&t.onload()}catch(e){addConsoleLog(e.message),t.onload()}}else{var n=createElement("a",{href:e,target:"_blank",download:""});n.style.display="none",document.body.appendChild(n),n.click(),n=null}}function setHeightEqualToWidth(e){e.style.height=e.offsetWidth+"px"}function reloadImage(e){var t=createUrl(e.src.split("?")[0],{t:(new Date).getTime().toString().substring(-4,4)});e.src=t}function setImageFill(e){e.onload=function(){$(this.parentNode).innerWidth();var e=$(this.parentNode).innerHeight();this.style.width="100%",this.style.height="auto",0<e&&this.height<e&&(this.style.width="auto",this.style.maxWidth="none",this.style.height="100%")},0<e.width&&0<e.height&&e.onload()}function isCSSFile(e){return".css"==e.substr(-4)}function isScriptFile(e){for(var t=["js"],n=0;n<t.length;n++){var o="."+t[n];if(e.substr(0-o.length)==o)return!0}return!1}function isImage(e){formatList=["jpg","jpeg","png","gif","svg"];for(var t=0;t<formatList.length;t++)if(e.substr(0-formatList[t].length)===formatList[t])return!0;return!1}function isVideo(e){formatList=["webm","mp4"];for(var t=0;t<formatList.length;t++)if(e.substr(0-formatList[t].length)===formatList[t])return!0;return!1}function loadImage(e,t){var n=new Image;"object"!=typeof t&&(t={});var o=t.onerror?t.onerror:null,r=t.onload?t.onload:null,a=t.onabort?t.onabort:null;return o&&(n.onerror=o),r&&(n.onload=r),a&&(n.onabort=a),n.src=e,n}function createImage(e,t){var n=new Image;for(var o in void 0===t&&(t=new Array),t)n[o]=t[o];return n.src=e,n}function setImageCenteredFill(e){if(!0===e.complete){e.style.maxHeight="none",e.style.maxWidth="none",e.style.width="auto",e.style.height="auto",image_width=e.offsetWidth,image_height=e.offsetHeight;var t=e.parentNode;container_width=t.offsetWidth,container_height=t.offsetHeight,container_width/container_height<image_width/image_height?(e.style.height="100%",e.style.width="auto",e.style.marginLeft=(container_width-e.offsetWidth)/2+"px"):(e.style.height="auto",e.style.width="100%",e.style.marginTop=(container_height-e.offsetHeight)/2+"px")}else e.onload=function(){setImageCenteredFill(this)}}function setRandomBorder(e,t){"object"!=typeof t&&(t={});var n=t.width||1,o=t.lightness||255,r=t.saturation||255,a={r:0,g:0,b:0},i=getRandomInteger(3);switch(a[["r","g","b"][i]]=o,i){case 0:var s=["g","b"];break;case 1:s=["r","b"];break;case 2:s=["r","g"]}a[s[getRandomInteger(2)]]=getRandomInteger(r+1),$(e).css({"border-style":"solid","border-width":n+"px","border-color":replaceData("rgb(R,G,B)",{R:a.r,G:a.g,B:a.b})})}function checkAudio(e){var t=createAudio();return!1!==t&&!!t.canPlayType("audio/"+e)}function createAudioPlayer(){return{el:createElement("audio",{autoplay:!0,preload:!0,muted:!1}),networkStateMap:{0:"音频/视频尚未初始化",1:"音频/视频是活动的且已选取资源，但并未使用网络",2:"浏览器正在下载数据",3:"未找到音频/视频来源"},init:function(e){var n=this,t=e.loadedmetadata||null,o=e.timeupdate||null,r=e.ended||null,a=e.error||null,i=e.canplaythrough||null;t&&$(this.el).on("loadedmetadata",t),o&&$(this.el).on("timeupdate",o),r&&$(this.el).on("ended",r),i?$(this.el).on("canplaythrough",i):this.el.autoplay&&$(this.el).on("canplaythrough",function(){n.play()}),a?$(this.el).on("error",a):$(this.el).on("error",function(e){addConsoleLog("An error occurred: "),addConsoleLog("  current source url: "+this.currentSrc),addConsoleLog("  current time: "+this.currentTime);var t=this.networkState;void 0!==n.networkStateMap[t]&&addConsoleLog("  network status: "+n.networkStateMap[t])})},setController:function(e){this.el=e},setAudio:function(e){this.pause(),this.el.src=e,this.play()},play:function(){if(!this.el.paused)return!0;try{this.el.play()}catch(e){return!1}return!this.el.paused},pause:function(){return!!this.paused||(this.el.pause(),!!this.el.paused)},getStatus:function(){return!this.el.paused},toggle:function(){return this.getStatus()?this.pause():this.play()},getCurrentTime:function(){return this.el.currentTime},setCurrentTime:function(e){this.el.currentTime=e}}}function supportsFullScreen(e){!e&&(e="video");var t=createElement(e);return t.requestFullscreen|t.webkitRequestFullscreen|t.mozRequestFullScreen|t.msRequestFullscreen|t.oRequestFullscreen}function setFullScreenVideo(e){try{if(e.requestFullscreen)return e.requestFullscreen(),!0;if(e.mozRequestFullScreen)return e.mozRequestFullScreen(),!0;if(e.msRequestFullscreen)return e.msRequestFullscreen(),!0;if(e.oRequestFullscreen)return e.oRequestFullscreen(),!0;if(e.webkitRequestFullscreen)return e.webkitRequestFullScreen(),!0}catch(e){addConsoleLog(e)}return!1}function setAutoCheckVideoToPlay(e){if("string"==typeof e){var t=$(e);if(!t.length)return!1;e=t[0]}return"video"!==e.tagName.toLowerCase()?(addErrorLog("element param is not a video element."),!1):(setInterval(function(){e.paused&&e.play()},1e3),!0)}function setTakeTurns(o,e){var r=e.interval||10,a=e.number||1;return getDebugStatus()&&existDebuggingContent("setTakeTurns")&&(addDebugLog("interval="+r),addDebugLog("number="+a)),setInterval(function(){var e="string"==typeof o?$(o):o,t=e.length,n=e.filter(":hidden").length;t<=(n+=a)&&(n=0),getDebugStatus()&&existDebuggingContent("setTakeTurns")&&(addDebugLog("interval="+r),addDebugLog("number="+a),addDebugLog("count="+t),addDebugLog("hideCount="+n)),e.show().filter(":lt("+n+")").hide()},1e3*r)}function setTakeTurnDisplayImage(o,e){!e&&(e=5);var t=(o=$(o)).find(".imageItem");t.length<1||(t.removeClass("hidden").hide().eq(0).show(),setInterval(function(){var e=o.find(".imageItem"),t=e.filter(":visible"),n=e.index(t);++n>=e.length&&(n=0),t.fadeOut("fast",function(){e.eq(n).fadeIn()})},1e3*e))}function setVideoPlaylist(t,n){if("string"!=typeof t||(t=getElement(t)))try{0===n.length&&(t.pause(),t.src=""),t.pause(),t.src=n[0],$(t).data("currentIndex",0),t.load(),t.play(),t.onended=function(){this.src;var e=$(t).data("currentIndex")||"0";e=parseInt(e),++e>=n.length&&(e=0),this.pause(),this.src=n[e],$(t).data("currentIndex",e),this.load(),this.play()}}catch(e){addConsoleLog(e)}}function canvasSupport(){return"function"==typeof createElement("canvas").getContext}function addUrlParam(e,t,n){var o=e;return e.indexOf("?")<0?o+="?":o+="&",o+=t+"="+n}function getUrlParam(e){var t=arguments[1]?arguments[1]:null,n=location.search.replace("?","");if(!n.length)return t;for(var o=n.split("&"),r=-1,a=0;a<o.length;a++)if(0===(r=o[a].indexOf(e+"=")))return o[a].substring(r+1+e.length);return t}function getParamsFromUrl(e){for(var t={},n=0;n<e.length;n++){var o=e[n],r=getUrlParam(e[n])||"";r&&(t[o]=decodeURIComponent(r))}return t}function goToTop(){if("undefined"!=typeof jQuery){var e=getScrollTop(),t="normal";e<100?t="slow":1e3<=e&&(t="fast"),$("html, body").animate({scrollTop:0},t)}else document.body.scrollTop=0,document.documentElement.scrollTop=0}function getScrollTop(){return document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:!!document.body&&document.body.scrollTop}function getScrollHeight(){return document.documentElement&&document.documentElement.scrollHeight?document.documentElement.scrollHeight:!!document.body&&document.body.scrollHeight}function initLoadMore(e,o){!e&&(e={});var r=e.bottomDistance||40,t=e.element||window;$(t).on("scroll",function(){var e=$(this).scrollTop(),t=$(document).height(),n=$(this).height();t-r<=e+n&&o()})}function pageDown(e){if("string"==typeof e){var t=$(e);if(!t.length)return;e=t[0]}getDebugStatus()&&existDebuggingContent("pageDown")&&(addDebugLog("scroll height: "+e.scrollHeight),addDebugLog("offset height: "+e.offsetHeight)),e.scrollHeight>e.offsetHeight&&(e.scrollTop<e.scrollHeight-e.offsetHeight?e.scrollTop+=e.offsetHeight:e.scrollTop=0)}function setAutoPageDown(e,t){t||(t=10),window.setInterval(function(){pageDown(e)},1e3*t)}function setMarquee(e,t){if("string"==typeof e){var n=$(e);if(!n.length)return;e=n[0]}interval||(interval=10);e.find();return window.setInterval(function(){getDebugStatus()&&existDebuggingContent("setMarquee")&&(addDebugLog("scroll height: "+e.scrollLeft),addDebugLog("offset height: "+e.offsetWidth),addDebugLog("scroll top: "+e.scrollTop)),e.scrollHeight>e.offsetHeight&&(e.scrollTop<e.scrollHeight-e.offsetHeight?e.scrollTop+=e.offsetHeight:e.scrollTop=0)},1)}function getWindowHeight(){if("undefined"!=typeof $)return $(window).outerHeight();var e=window.innerHeight||window.height;return e||0}function getWindowWidth(){if("undefined"!=typeof $)return $(window).outerWidth();var e=window.innerWidth||window.width;return e||0}function getBodyHeight(){var e=document.body.offsetHeight||document.documentElement.offsetHeight||document.body.clientHeight||$(document.body).height();return e||0}function setBodyMinHeight(){$(window).on("resize",function(){$(document.body).css("height","auto");var e=getBodyHeight(),t=getWindowHeight();if(getDebugStatus()&&existDebuggingContent("setBodyMinHeight")&&(addDebugLog("bodyHeight= "+e),addDebugLog("windowHeight= "+t)),0===e||0===t)return!1;e<t&&$(document.body).css("height",t+"px")}).trigger("resize")}function isOverflowHeight(e){var t=$(e);if(!t.length)return!1;for(var n=t[0],o=n.children,r=0,a=0;a<o.length;a++)r+=parseInt($(o[a]).css("margin-top").replace("px","")),r+=o[a].offsetHeight,r+=parseInt($(o[a]).css("margin-bottom").replace("px",""));return r>n.offsetHeight}function showMask(){var e=getElement("pageMask");e||(e=createElement("div",{id:"pageMask",class:"maskLayer layer"}),document.body.append(e)),$(e).show()}function hideMask(){$("#pageMask").hide()}function createDialog(e){}function adjustDialog(e){getWindowWidth();var t=$(e).outerHeight()-$(e).find(".dialog_header").outerHeight()-$(e).find(".dialog_footer").outerHeight();$(e).find(".dialog_body").css("height",t+"px")}function centerDialog(e){$(e).css({margin:"0",left:"0",top:"0"});var t=getWindowWidth(),n=getWindowHeight(),o=(t-$(e).outerWidth())/2,r=(n-$(e).outerHeight())/2;$(e).css({"margin-left":"0","margin-top":"0",left:o+"px",top:r+"px"})}function initDialogAction(){$(".layer .panel .close_button").on("click",function(){$(this).parents(".layer").fadeOut()}),$(".dialog .close_button").on("click",function(){var e=$(this).parents(".dialog"),t=$(this).parents(".layer");t.length?t.fadeOut():e.fadeOut()})}function openDialog(e,t){"object"!=typeof t&&(t={});var n=t.onConfirm||function(){},o=t.onCancel||function(){},r=t.onShow||function(){},a=$(e),i=a.find(".dialog_body form"),s=i.length?i[0]:null;a.find(".confirmButton").on("click",function(){n(a[0],s)}),a.find(".cancelButton").on("click",function(){o(a[0])}),$(e).fadeIn(function(){r(a[0])}),adjustDialog(a[0]),centerDialog(a[0])}function closeDialog(e){$(e).fadeOut()}function showMessageBox(e,t){!t&&(t="提示");var n=$("#mainMessageBox");return n?(n.find(".dialog_body").html("<p>"+e+"</p>"),n.find(".dialog_header .dialog_title").html(t),n.fadeIn(),centerDialog(n),!0):(addConsoleLog("Element #mainMessageBox not exist."),!1)}function getBrowserCore(){var e=window.navigator.userAgent,t=RegExp("Gecko").test(e),n=RegExp("AppleWebKit").test(e),o=RegExp("Presto").test(e),r=RegExp("IE").test(e);return n?"Webkit":t?"Gecko":o?"Presto":r?"Trident":"unknown"}function isIE(){return"Trident"==getBrowserCore()}function getIEsVersion(){var e=window.navigator.userAgent;if(!e.search(RegExp("MSIE [0-9.]+;")))return 0;var t=e.match(RegExp("MSIE [0-9]+.[0-9]+;"))[0];return t=t.replace(RegExp("MSIE ([0-9])+.[0-9]+;"),"$1"),Number(t)}function isWeixin(){return 0<=navigator.userAgent.indexOf("MicroMessenger")}var isWechat=isWeixin;function isWindowsWechat(){return 0<=navigator.userAgent.toLocaleLowerCase().indexOf("windowswechat")}function getBrowserLanguage(){var t="";try{t=(navigator.language||navigator.browserLanguage).toLowerCase()}catch(e){return addConsoleLog(e),t}return t}function checkBrowserFunction(){var e={cssVersion:"0",storageSupported:"undefined"!=typeof localStorage,jsonSupported:"undefined"!=typeof JSON,fileReaderSupported:"undefined"!=typeof FileReader,evaluate:""};void 0===document.body.style?e.cssVersion="0":void 0===document.body.style.display?e.cssVersion="1":void 0!==document.body.style.borderRadius?e.cssVersion="3":void 0!==document.body.style.fontSize?e.cssVersion="2.1":void 0!==document.body.style.backgroundImage&&(e.cssVersion="2");var t=0;return e.storageSupported&&t++,e.jsonSupported&&t++,e.fileReaderSupported&&t++,3<=t?e.evaluate="good":"3"<=e.cssVersion?e.evaluate="normal":e.evaluate="bad",e}function checkFile(e,t){return 0===e.type.indexOf(t)}function checkFileIsImage(e){return!!/image\/\w+/.test(e.type)}function fileReaderSupport(){return"undefined"!=typeof FileReader}function readFile(e,t,n){if(!fileReaderSupport())return addConsoleLog("[error] FileReader API is not supported."),!1;"object"!=typeof n&&(n={});var o=n.onabort?n.onabort:null,r=n.onload?n.onload:null,a=n.onloadend?n.onloadend:null,i=n.onloadstart?n.onloadstart:null,s=n.onprogress?n.onprogress:null,l=new FileReader;switch(o&&(l.onabort=o),r&&(l.onload=r),a&&(l.onloadend=a),i&&(l.onloadstart=i),s&&(l.onprogress=s),t){case"data_url":return l.readAsDataURL(e),!0}return!1}function convertImage2Canvas(e,t,o){if(!canvasSupport())return!1;var n=null;"object"!=typeof t&&(t={});var r=t.image_min_width?t.image_min_width:-1,a=t.image_min_height?t.image_min_height:-1,i=t.image_max_width?t.image_max_width:-1,s=t.image_max_height?t.image_max_height:-1;getDebugStatus()&&existDebuggingContent("convertImage2Canvas")&&(addDebugLog("image_max_width: "+i),addDebugLog("image_max_height: "+s));var l=t.canvas_width?t.canvas_width:-1,u=t.canvas_height?t.canvas_height:-1,c=t.onerror?t.onerror:null;"string"==typeof e?(n=new Image).src=e:n=e,c&&(n.onerror=c),n.onload=function(){var e=this.width/this.height;(-1<r||-1<a||-1<i||-1<s)&&((this.width<r||this.height<a)&&(a<=r/e?(this.width=r,this.height=this.width/e):(this.height=a,this.width=this.height*e)),-1<i&&this.width>i&&-1<s&&this.height>s?i/e<=s?(this.width=i,this.height=this.width/e):(this.height=s,this.width=this.height*e):-1<i&&this.width>i?(this.width=i,this.height=this.width/e):-1<s&&this.height>s&&(this.height=s,this.width=this.height*e));var t=createElement("canvas"),n=t.getContext("2d");t.width=-1<l?l:this.width,t.height=-1<u?u:this.height,n.drawImage(this,0,0,t.width,t.height),o&&o(t)}}function getForm(e){return e.form?e.form:null}function setFormControl(e,t,n){if("string"==typeof e){var o=e;if(!(e=document.getElementById(e)))return addErrorLog("form dom with id:"+o+" not found."),!1}for(var r=$(e).find('*[name="'+t+'"]'),a=0;a<r.length;a++){var i=r[a];switch(i.nodeName.toLowerCase()){case"input":switch(i.type){case"checkbox":inArray(i.value,n)&&(i.checked=!0);break;case"radio":i.value==n&&(i.checked=!0);break;case"password":getDebugStatus()&&existDebuggingContent("setFormControl")&&addDebugLog("skip inputbox type:password.");break;case"file":getDebugStatus()&&existDebuggingContent("setFormControl")&&addDebugLog("skip inputbox type:file.");break;case"text":default:i.value=n}break;case"textarea":r[a].innerHTML=n;break;case"select":default:i.value=n}}return!0}function checkForm(e){if("string"==typeof e){var t=e;if(!(e=document.getElementById(e)))return addErrorLog("form dom with id:"+t+" not found."),!1}for(var n=0;n<e.length;n++){var o=e[n].required||!1,r=e[n].value;if(o&&""===r)return e[n].focus(),!1}return e.checkValidity()}function formAjaxSubmit(e,t){return!t&&(t={}),void 0!==t.url||(t.url=e.dataset.api||"",t.url)?(void 0===t.type&&(t.type=e.method||"post"),t.data=$(e).serialize(),$.ajax(t),!0):(addConsoleLog("[error] missing url param for ajax submit form."),!1)}function setCheckAllAction(e){e.onchange=function(){for(var e=this.checked,t=this.form.getElementsByTagName("input"),n=0;n<t.length;n++)"checkbox"===t[n].type&&(t[n].checked=e)}}function setCheckAllChildrenAction(e){$(e).on("change",function(){var e=this.checked,t=this.parentNode;"label"===t.nodeName.toLowerCase()&&(t=t.parentNode);for(var n=$(t).find("ul").find('input[type="checkbox"]'),o=0;o<n.length;o++)n[o].checked=e})}function setTextareaAutoIncreaseHeight(e){$(e).on("input",function(){this.offsetHeight<this.scrollHeight&&(this.style.height=this.scrollHeight+"px")})}function uploadFiles(e){"object"!=typeof e&&(e={}),e.type=e.method||e.type||"POST",e.dataType=e.dataType||"json",e.contentType=e.contentType||!1,e.processData=e.processData||!1;for(var t=e.name||"file",n=e.data||{},o=e.files||[],r=e.onProgress||null,a=new FormData,i=0;i<o.length;i++)a.append(t||"file",o[i]);for(var s in n)a.append(s,n[s]);e.data=a,e.xhr=function(){var e=$.ajaxSettings.xhr();return e.upload&&r&&e.upload.addEventListener("progress",r,!1),e},$.ajax(e)}function initImportButton(e,t){"object"!=typeof t&&(t={});var n={name:"ImportHelper",control:createElement("input",mergeObject({type:"file"},{name:t.name||""}))};return $(n.control).hide(),document.body.appendChild(n.control),$(n.control).ajaxfileupload(t),$(e).on("click",function(){$(n.control).trigger("click")}),n}function initFileUpload(e,t){void 0===t&&(t={});var r=t.success||null,n=t.error||null,a=t.complete||null,i=(t.progress,t.method,t.url||""),s=t.extraData||{};$(e).on("change",function(){var o=this,e=new FormData;for(var t in e.append(this.name||"file",this.files[0]),s)e.append(t,s[t]);$.ajax({url:i,type:"post",dataType:"json",data:e,contentType:!1,processData:!1,success:function(e,t,n){r&&r(e,t,n,o)},error:n,complete:a})})}function initAdvancedFileUpload(e,t){$(e).ajaxFileUpload(t)}function initTextboxActions(e,t){var n=t.change?t.change:null,o=t.input?t.input:null;n&&(e.onchange=function(){var e=this.value,t=e.length;n(this,e,t)}),o&&(e.oninput=function(){var e=this.value,t=e.length;o(this,e,t)})}function addInputboxAutocompleteValue(e,t){var n=document.createElement("form");n.action="javascript:;",n.method="post",n.style.display="none";var o=document.createElement("input");o.type="text",o.name=e,o.value=t,n.appendChild(o),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}function isSupportCrossOrigin(){return"undefined"!=typeof XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials}function createDialog(e,t){var n=arguments[3]?arguments[3]:new Object,o={class:"dialog"};n.id&&(o.id=n.id);var r=createElement("div",o),a=createElement("div",{class:"dialog_header"});r.appendChild(a);var i=createElement("div",{class:"dialog_title"},e);a.appendChild(i);var s=createElement("div",{class:"dialog_buttons"});a.appendChild(s);var l=createElement("button",{class:"button_close dialog_close"},"x");s.appendChild(l),l.onclick=function(){var e=this.parentNode.parentNode.parentNode;e.parentNode.removeChild(e)};var u=createElement("div",{class:"dialog_body"},t);return r.appendChild(u),r}function removeDialog(e){e&&e.parentNode&&("object"!=typeof e&&(e=getElement(e)),e.parentNode.removeChild(e))}function createProgressDialog(e,t){var n=createElement("div",{id:e,class:"dialog dialog_progress"}),o=createElement("div",{class:"box_progress"});n.appendChild(o);var r=createElement("div",{class:"progress"});o.appendChild(r);var a=createElement("div",{class:"progress-bar progress-bar-striped active"});r.appendChild(a),a.style.width=t+"%",document.body.appendChild(n)}function updateProgressDialog(e,t){var n=getElement(e);if(!n)return log("dialog ("+e+") not found."),!1;if(document.getElementsByClassName){var o=n.getElementsByClassName("progress-bar");o.length&&(o[0].style.width=t+"%")}else $(n).find(".progress-bar").css("width",t+"%");return!0}function removeProgressDialog(e){var t=getElement(e);return t?(t.parentNode.removeChild(t),!0):(log("dialog ("+e+") not found."),!1)}function showLoadingIcon(e){$("#loading_icon_container").fadeIn(e||"fast")}function hideLoadingIcon(e){$("#loading_icon_container").fadeOut(e||"fast")}function getMainAudioController(){return getElement("mainAudioController")}function playMusic(){var e=getElement("mainAudioController");if(!e)return!1;try{e.play()}catch(e){return!1}return!e.paused&&($("#mainMusicControlButton").removeClass("stopped"),!0)}function pauseMusic(){var e=getElement("mainAudioController");return!!e&&(e.pause(),!!e.paused&&($("#mainMusicControlButton").addClass("stopped"),!0))}function getMusicPlayStatus(){var e=getElement("mainAudioController");return!!e&&!e.paused}function toggleMusic(){return getMusicPlayStatus()?pauseMusic():playMusic()}function playLetter(e,t){!e&&(e=0);var n=$("#letter_content_box > *");e+1>n.length||(n.eq(e).fadeIn(3e3),window.setTimeout(function(){playLetter(e+1,t)},t))}function loadDependencies(){inArray(new String("jQuery").toLowerCase(),dependencies)&&"undefined"==typeof jQuery&&("zh-cn"===getBrowserLanguage()?document.body.appendChild(createElement("script",{src:cdnList.china.jquery})):document.body.appendChild(createElement("script",{src:cdnList.world.jquery}))),inArray("moment",dependencies)&&"undefined"==typeof moment&&("zh-cn"===getBrowserLanguage()?document.body.appendChild(createElement("script",{src:cdnList.china.momentWithLocales})):document.body.appendChild(createElement("script",{src:cdnList.world.momentWithLocales})))}function includeDependencies(){inArray(new String("jQuery").toLowerCase(),dependencies)&&"undefined"==typeof jQuery&&("zh-cn"===getBrowserLanguage()?printTag("script",{src:cdnList.china.jquery}):printTag("script",{src:cdnList.world.jquery})),inArray("moment",dependencies)&&"undefined"==typeof moment&&("zh-cn"===getBrowserLanguage()?printTag("script",{src:cdnList.china.momentWithLocales}):printTag("script",{src:cdnList.world.momentWithLocales}))}function loadFile(e,t){void 0===t&&(t={});var n=t.dataType||"text",o=t.error||null,r=t.afterLoad||null;$.ajax(e,{dataType:n,success:function(e){r&&r(e)},error:o})}function loadHtml(e,n,t){void 0===t&&(t={}),t.dataType="html",t.success=function(e){var t=$(n);t.after(e),t.remove()},$.ajax(e,t)}function loadAppendHtml(e,t,n){void 0===n&&(n={}),n.dataType="html",n.success=function(e){$(t).append(e)},$.ajax(e,n)}function getSessionData(e){return"undefined"==typeof sessionStorage?null:sessionStorage.getItem(e)}function setSessionData(e,t){return"undefined"!=typeof sessionStorage&&(sessionStorage.setItem(e,t),!0)}function removeSessionData(e){return"undefined"!=typeof sessionStorage&&(sessionStorage.removeItem(e),!0)}function getCacheData(e){return"undefined"==typeof localStorage?null:localStorage.getItem(e)}function setCacheData(e,t){return"undefined"!=typeof localStorage&&(localStorage.setItem(e,t),!0)}function removeCacheData(e){return"undefined"!=typeof localStorage&&(localStorage.removeItem(e),!0)}function initTreeView(e){$(e).find(".folderNode .folderIcon, .folderNode .folderName").on("click",function(){$(this).parent().parent().toggleClass("extended")})}function setUISetting(e,t){var n="ui_setting_"+e;localStorage.setItem(n,t)}function getUISetting(e,t){t=t||null;var n="ui_setting_"+e;return localStorage.getItem(n)||t}function initUISettingForm(form,options){if(getDebugStatus()&&existDebuggingContent("initUISettingForm")&&addDebugLog("init UI setting form."),"string"!=typeof form||(form=getElement(form),form)){options=options||{};for(var onchange=options.onchange||null,controlIndex=0;controlIndex<form.length;controlIndex++){var control=form[controlIndex],name=control.name,target=control.dataset.target||"body",property=control.dataset.property||"",defaultValue=control.dataset.default||"",expression=control.dataset.expression||"";if(name)if(property){$(control).on("change",function(event){var name=this.name,target=this.dataset.target||"body",property=this.dataset.property||"",expression=this.dataset.expression||"",value=this.value;if(property){if(setUISetting(name,value),expression)try{eval("value = "+expression)}catch(e){addConsoleLog("[error] "+e.message)}$(target).css(property,value),onchange&&onchange()}else addConsoleLog("[warnning] control missing data-property value.")});var setting=getUISetting(name);setting&&setting!=defaultValue&&(setFormControl(form,name,setting),$(control).change())}else addConsoleLog("[warnning] control missing data-property value.")}onchange&&onchange()}else addConsoleLog("[error] form not found.")}function applyNativeLanguage(e,t,n,o){e=e||getBrowserLanguage()||t,t=t||"en-us",n=n||[],o=o||{},""!=(e=e.toLowerCase())&&inArray(e,n)||(e=t),loadLang(e,function(e){e||log("[error] load language fail."),$("*[data-native]").each(function(){var e="";if(""==$(this).attr("data-native")?(e="input"==this.nodeName.toLowerCase()?$(this).attr("placeholder"):this.innerHTML,$(this).attr("data-native",e)):e=$(this).attr("data-native"),""!=e){void 0===window.nativeLanguage&&(window.nativeLanguage={});var t="string"==typeof window.nativeLanguage[e]?window.nativeLanguage[e]:"";t&&("input"==this.nodeName.toLowerCase()?$(this).attr("placeholder",t):this.innerHTML=t)}})},o)}function loadLang(e,n,t){e=((t=t||{}).baseUrl||"")+"./lang/"+e+".json",$.ajax(e,{success:function(e){for(var t in void 0===window.nativeLanguage&&(window.nativeLanguage={}),e)window.nativeLanguage[t]=e[t];n&&n(!0,e)},error:function(){n&&n(!1,"")}})}function initNativeLanguage(e){var t=e.baseUrl||"./",n=e.defaultLanguage||"en-us",o=e.languageSupportedList||[n],r="";if("object"==typeof localStorage)try{r=localStorage.getItem("language")||""}catch(e){log(e)}if(!r)try{r=$.cookie("language")}catch(e){log(e)}return applyNativeLanguage(r,n,o,{baseUrl:t}),r}function initLanguageSelectbox(e,t){var n=t.baseUrl||"./",o=t.defaultLanguage||"en-us",r=t.currentLanguage||o,a=t.languageSupportedList||[];$(e).val(r).on("change",function(){var e=this.value;applyNativeLanguage(e,o,a,{baseUrl:n});var t=!1;if("object"==typeof localStorage)try{localStorage.setItem("language",e),t=!0}catch(e){log(e)}if(!t)try{t=$.cookie("language",e)}catch(e){log(e)}})}function parseNativeLang(e){for(var t in void 0===window.nativeLanguage&&(window.nativeLanguage={}),window.nativeLanguage)if(t==e)return window.nativeLanguage[t];return e}function initAutoMoveInWindow(e){var h;$(e).css({position:"fixed",top:"50%",left:"50%",bottom:"auto",right:"auto"}).attr("data-run","on"),(h=function(e){if("on"==(e.dataset.run||"on")){var t=getWindowWidth(),n=getWindowHeight(),o=e.offsetWidth,r=e.offsetHeight,a=e.offsetLeft,i=e.offsetTop,s=t-o,l=n-r,u=0,c=0,d=parseInt(e.dataset.dir||1);switch(d=4<d+1?1:d+1){case 1:u=Math.random()*(s-1);break;case 2:c=Math.random()*(l-1),u=s;break;case 3:u=Math.random()*(s-1),c=l;break;case 4:c=Math.random()*(l-1)}var g=parseInt(e.dataset.speed||80),f=Math.sqrt(Math.pow(u-a,2)+Math.pow(c-i,2));$(e).attr("data-dir",d).animate({left:u,top:c},f/g*1e3,"linear",function(){h(e)})}else setTimeout(function(){h(e)},1e3)})(e)}function initCKEditors(e,n){var t=$(e);t.length&&t.each(function(){var t=this,e=this.id;CKEDITOR.replace(e,{on:{instanceReady:function(e){n&&n(t,e.editor)}}})})}function initCKEditorById(e,t){return CKEDITOR.replace(e,{on:{instanceReady:function(e){t&&t(control,e.editor)}}})}function initVueList(e){var t=e.el||"",n=e.viewPageUrl||"",r=e.apiConfig||{},o=e.data||{},a=e.methods||{},i=void 0===e.loadFirstPage||e.loadFirstPage,s=e.autoLoad||!1,l=e.mounted||!1,u=e.updated||!1,c=e.size||10,d=e.pageParam||"page",g=e.sizeParam||"size",f=e.filterColumns||{},h=e.checkingColumns||null,m=e.afterLoadData||null,p=e.beforeUpdateList||null,v=e.afterUpdateList||null,y=e.afterRemove||null,b=e.onLoadError||null,w={initOptions:e,page:1,size:c,count:0,pageCount:1,keywords:"",filters:f,list:[],ajaxLock:!1,status:"",checkingColumns:h};for(var C in o)w[C]=o[C];var L={getItemById:function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].id===e)return this.list[t];return null},cleanList:function(){this.list=[]},checkColumns:function(e,t){for(var n=0;n<e.length;n++)for(var o in t){typeof e[n][o]!=t[o]&&(log('data type not match "'+t[o]+'" with key:'+o),getDebugStatus()&&addConsoleLog(e[n]))}},loadPage:function(e){if("object"==typeof r.list){if(!this.ajaxLock){this.ajaxLock=!0,e&&(this.page=e);var n=this,t=r.list.params||{};for(var o in t[d]=this.page,t[g]=this.size,this.filters)this.filters[o]&&(t[o]=this.filters[o]);n.status="loading",$.ajax({url:r.list.url,type:r.list.method||"get",data:t,success:function(e){if(m)m(e);else{if(n.checkingColumns&&n.checkColumns(e.data.rows,h),p)if(!1===p(n.list,e.data))return;n.list=n.list.concat(e.data.rows),n.pageCount=e.data.totalPage||1,n.count=e.data.totalCount||n.list.length,v&&v()}n.status="ready"},complete:function(){n.status="ready",n.ajaxLock=!1},error:function(e,t){n.status="error",b&&b(e,t)}})}}else addConsoleLog("[error] list api not defined.")},loadFirstPage:function(){me.list=[],this.loadPage(1)},loadPrevPage:function(){1!=this.page&&this.loadPage(this.page-1)},loadNextPage:function(){this.page+1>this.pageCount||this.loadPage(this.page+1)},onPageNumClick:function(e){this.loadPage(e.target.innerHTML)},onPageNumChange:function(e){var t=parseInt(this.value)||0;this.loadPage(t)},onQuery:function(e){this.loadFirstPage()},onView:function(e){var t=e.currentTarget.dataset.id;n&&(location.href=n+"?id="+t)},onRemove:function(e){var n=this,o=e.currentTarget.dataset.id||"";window.confirm("确认要删除这些数据吗？（该操作不可逆）")&&$.ajax({url:r.delete.url,type:r.delete.method||"get",data:{id:o},success:function(e){var t=n.getItemById(o);n.list=removeArrayElement(n.list,t),y&&y(e)}})},init:function(){var e=this;i&&e.loadPage(1),0!=s&&initLoadMore({bottomDistance:s},function(){e.loadNextPage()})},formatDate:function(e){return e?moment(e).format("YYYY-MM-DD"):""},formatDateTime:function(e){return e?moment(e).format("YYYY-MM-DD HH:mm:ss"):""},fromNowExpress:function(e){return e?moment(e).fromNow():""}};for(var C in a)L[C]=a[C];var D=new Vue({el:t,data:w,methods:L,mounted:l,updated:u});return D.init(),D}function initVueTableList(e){var t=e.el||"",n=e.editingDialog||"",o=e.editingPageUrl||"",r=e.viewPageUrl||"",a=e.apiConfig||{},i=e.data||{},s=e.methods||{},l=e.size||10,u=e.pageParam||"page",c=e.sizeParam||"size",d=e.editingColumns||{},g=e.filterColumns||{},f=e.afterLoadData||null,h={page:1,size:l,count:0,pageCount:1,keywords:"",filters:g,list:[],ajaxLock:!1};for(var m in i)h[m]=i[m];var p={loadPage:function(e){if(!this.ajaxLock){this.ajaxLock=!0,e&&(this.page=e);var t=this,n=a.list.params||{};for(var o in n[u]=this.page,n[c]=this.size,this.filters)this.filters[o]&&(n[o]=this.filters[o]);$.ajax({url:a.list.url,type:a.list.method||"get",data:n,success:function(e){f?f(e):(t.list=e.data.rows,t.pageCount=e.data.totalPage||1,t.count=e.data.totalCount||t.list.length)},complete:function(){t.ajaxLock=!1},error:appConfig.ajaxErrorHandle})}},loadFirstPage:function(){this.loadPage(1)},loadPrevPage:function(){1!=this.page&&this.loadPage(this.page-1)},loadNextPage:function(){this.page+1>this.pageCount||this.loadPage(this.page+1)},reload:function(){this.ajaxLock||this.loadPage()},onPageNumClick:function(e){this.loadPage(e.target.innerHTML)},onPageNumChange:function(e){var t=parseInt(this.value)||0;this.loadPage(t)},onQuery:function(e){this.loadFirstPage()},onAlter:function(e){var t=e.target.dataset.id;n?($(n).modal(),this.editingDialogController.init(),this.editingDialogController.loadData(t)):o&&(location.href=o+"?id="+t)},onView:function(e){var t=e.target.dataset.id;r&&(location.href=r+"?id="+t)},onSelectRow:function(e){var t=e.currentTarget;$(t).toggleClass("selected")},create:function(){n?($(n).modal(),this.editingDialogController.itemData=$.extend(d)):o&&(location.href=o)},onRemove:function(){var e=this,t=this.getSelectedIds();if(t.length<1)app.showMessageBox("请先勾选需要删除的数据。");else if(window.confirm("确认要删除这些数据吗？（该操作不可逆）"))for(var n=t.length,o=0,r=0;r<t.length;r++)$.ajax({url:a.delete.url,type:a.delete.method||"get",data:{id:t[r]},complete:function(){++o==n&&e.loadFirstPage()}})},onRemoveRow:function(e){var t=e.currentTarget.dataset.id,n=this;window.confirm("确认要删除这条数据吗？（该操作不可逆）")&&$.ajax({url:a.delete.url,type:a.delete.method||"get",data:{id:t},success:function(e){n.reload()}})},init:function(){this.loadPage(1)},getSelectedIds:function(){for(var e=$(this.$el).find("table .rowCheckbox"),t=[],n=0;n<e.length;n++){var o=e.eq(n).attr("data-id");if(o)e[n].checked&&t.push(o)}return t},checkAll:function(e){var t=e.currentTarget.checked;$(this.$el).find('input[type="checkbox"]').each(function(){this.checked=t})},formatDate:function(e){return e?moment(e).format("YYYY-MM-DD"):""},formatDateTime:function(e){return e?moment(e).format("YYYY-MM-DD HH:mm:ss"):""},fromNowExpress:function(e){return e?moment(e).fromNow():""}};for(var m in s)p[m]=s[m];var v=new Vue({el:t,data:h,methods:p});return v.init(),n&&(v.editingDialogController=new Vue({el:n,data:{title:"编辑",itemData:$.extend(d)},methods:{init:function(){var e=$(this.el).find(".editor");e.length&&e.each(function(){CKEDITOR.replace(this.id)})},loadData:function(e,t){var n=this;$.ajax({url:a.get.url,type:a.get.method||"get",data:{id:e},success:function(e){n.itemData=e.data},complete:function(){n.ajaxLock=!1},error:appConfig.ajaxErrorHandle})},save:function(){var e=$(this.el).find(".editor");e.length&&e.each(function(){var e=CKEDITOR.instances[this.id];e&&(this.value=e.getData())});var t=this.itemData.id?a.update.url:a.add.url,n=this.itemData.id?a.update.method:a.add.method;$.ajax({url:t,method:n,data:this.itemData,success:function(e){}})}}})),v}function initVueItemDetail(e){for(var t=e.el||"",n=e.apiConfig||{},o=e.data||{},r=e.methods||{},a=e.dataColumn||[],i=e.columnMapping||{},s=e.parentPage||{},l=(e.onSubmitSuccess,e.beforeSubmit,e.onDataLoaded||null),u=e.onLoadingError||null,c=e.onMounted||null,d=e.onCreated||null,g=e.onUpdated||null,f={},h=0;h<a.length;h++)f[a[h]]=null;var m={status:"",itemData:f};for(var p in o)m[p]=o[p];var v={loadData:function(e,o){var r=this;this.status="loading";var t={};t[n.get.idParam||"id"]=e,$.ajax({url:n.get.url,type:n.get.method||"get",data:t,success:function(e){r.status="ready";var t=e.data;for(var n in l&&(t=l(t,r)),t=dataColumnConvert(t,i))r.itemData[n]=t[n];o&&o(t)},error:function(e,t){r.status="error",u&&u(e,t)}})},onRemove:function(e){e.currentTarget;var t=this.itemData.id;window.confirm("确认要删除数据吗？（该操作不可逆）")&&$.ajax({url:n.delete.url,data:{id:t},success:function(e){location.href=s||"index.html"}})},formatDate:function(e){return e?moment(e).format("YYYY-MM-DD"):""},formatDateTime:function(e){return e?moment(e).format("YYYY-MM-DD HH:mm:ss"):""},fromNowExpress:function(e){return e?moment(e).fromNow():""}};for(var p in r)v[p]=r[p];return new Vue({el:t,data:m,methods:v,mounted:function(){this.status="mounted";var e=getUrlParam("id");e||(location.href=s||"index.html"),this.loadData(e),c&&c(this)},created:function(){d&&d(this)},updated:function(){g&&g(this)}})}function initVueForm(e){var t=e.el||"",l=e.apiConfig||{},n=e.data||{},o=e.methods||{},r=e.parentPage||{},a=e.loadCategoryList||!1,i=e.editingColumns||{},u=e.columnsMapping||{},c=e.onSubmitSuccess||null,s=e.onDataLoaded||null,d=e.onMounted||null,g=e.onBeforeUpload||null,f=e.onAfterUpload||null,h=e.onUploadError||null,m={title:"编辑",editors:[],status:"",itemData:cloneObject(i),categoryList:[]};for(var p in n)m[p]=n[p];var v=e.beforeSubmit||null,y={init:function(){a&&this.loadCategoryList()},loadCategoryList:function(){var t=this;$.ajax({url:l.categoryList.url,type:l.categoryList.method||"get",data:l.categoryList.params||{},success:function(e){t.categoryList=e.data},error:function(){}})},initEditors:function(e){initCKEditors(".editor",e)},loadData:function(e,n){var o=this;$.ajax({url:l.get.url,type:l.get.method||"get",data:{id:e},success:function(e){var t=e;s&&(t=s(t,o)),o.itemData=t,n&&n(t)},complete:function(){o.ajaxLock=!1},error:appConfig.ajaxErrorHandle})},updateEditors:function(){for(var e=0;e<this.editors.length;e++){var t=this.editors[e].id,n=$("#"+t).val();this.editors[e].setData(n)}},onChangeForUpload:function(e){var o=this,t=e.currentTarget;if("loading"!==this.status){var n=new FormData,r=l.upload.params||{};for(var a in r)n.append(a,r[a]);for(var i=0;i<t.files.length;i++)n.append(t.name||"file",t.files[i]);if(g)if(!g(n,t,o))return;this.status="loading",$.ajax({url:l.upload.url,type:"post",dataType:"json",data:n,contentType:!1,processData:!1,success:function(e,t,n){f&&f(e,t,n,o)},error:h,complete:function(){o.status="ready"}})}},save:function(){var e=$(this.$el).find(".editor");if(e.length)for(var t=0;t<e.length;t++){var n=CKEDITOR.instances[e.eq(t).attr("id")];if(n){var o=n.getData();(s=e.eq(t).attr("name"))&&(this.itemData[s]=o),e.eq(t).text(o)}}var r=this.itemData.id?l.update.url:l.add.url,a=this.itemData.id?l.update.method:l.add.method,i=cloneObject(this.itemData);for(var s in u)apiKey=u[s],i[apiKey]=i[s],delete i[s];return v&&!(i=v(i))||$.ajax({url:r,method:a,data:i,success:function(e){c&&c(e)},error:appConfig.ajaxErrorHandle}),!1},onRemove:function(e){e.currentTarget;var t=this.itemData.id;window.confirm("确认要删除数据吗？（该操作不可逆）")&&$.ajax({url:l.delete.url,data:{id:t},success:function(e){location.href=r||"index.html"}})},formatDate:function(e){return e?moment(e).format("YYYY-MM-DD"):""},formatDateTime:function(e){return e?moment(e).format("YYYY-MM-DD HH:mm:ss"):""},fromNowExpress:function(e){return e?moment(e).fromNow():""}};for(var p in o)y[p]=o[p];return new Vue({el:t,data:m,methods:y,created:function(){log("vue created."),this.status="ready",this.init();var e=this,t=getUrlParam("id");t?e.loadData(t,function(){setTimeout(function(){e.initEditors()},800)}):e.initEditors()},mounted:function(){d&&d(this)}})}function getLocation(e){"object"!=typeof e&&(e={});var t=e.type||"wgs84",n=e.success||null,o=e.error||null;isWechat()&&"object"==typeof wx?wx.getLocation({type:t,success:function(e){e.latitude,e.longitude,e.speed,e.accuracy;n&&n(e)},error:function(){o&&o(res)}}):void 0!==navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){n&&n(e)},function(e){o&&o(e)})}