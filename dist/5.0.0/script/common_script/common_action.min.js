$(document).ready(function(){if($(document.body).hasClass("fullHeight")&&setBodyMinHeight(),getUrlParam("debug")&&enableDebug(),getDebugStatus()&&($('<div id="debugModeTag" class="f14r16">调试模式</div>').appendTo(document.body),$(".debugButtonLayer").removeClass("hide").show()),getUrlParam("vconsole")&&("undefined"==typeof VConsole?loadScript("https://cdn.bootcss.com/vConsole/3.3.4/vconsole.min.js",{onload:function(){window.vConsole=new VConsole}}):window.vConsole=new VConsole),getUrlParam("test")&&$(document.body).addClass("testMode"),$("textarea.autoIncreaseHeight").each(function(){setTextareaAutoIncreaseHeight(this)}),$(".checkAllChildren").each(function(){setCheckAllChildrenAction(this)}),$("#mainMusicControlButton").on("click",function(){toggleMusic()}),$(".showLayer").on("click",function(){var t=$(this).data("target");t&&$(t).fadeIn()}),initDialogAction(),$(".backspaceButton").on("click",function(){var t=$(this).parents(".inputGroup").find(".inputbox"),e=t.val();e.length<1||(e=e.substr(0,e.length-1),t.val(e))}),$(".autoPageDown").each(function(){setAutoPageDown(this,10)}),1<=$(".takeTurnDisplayImage").length&&$(".takeTurnDisplayImage").each(function(){setTakeTurnDisplayImage(this)}),$(".videoPlayer .playButton").on("click",function(){var t=$(this).parents(".videoPlayer").find(".videoController");if(t.length)try{t[0].play()}catch(t){addConsoleLog(t)}}),$(".videoPlayer .pauseButton").on("click",function(){var t=$(this).parents(".videoPlayer").find(".videoController");if(t.length)try{t[0].pause()}catch(t){addConsoleLog(t)}}),$(".videoPlayer .fullScreenButton").on("click",function(){var t=$(this).parents(".videoPlayer").find(".videoController");t.length&&(t=t[0],setFullScreenVideo(t))}),$(".videoController").on("dblclick",function(){setFullScreenVideo(this)}),$("[data-html-src]").each(function(){var t=$(this).data("html-src");t&&loadHtml(t+".html",this)}),$(".qqMapContainer").length&&$(".qqMapContainer").each(function(){new qq.maps.Map(this,{center:new qq.maps.LatLng(23.027094,113.111318),zoom:15})}),$(".treeView").length&&initTreeView(".treeView"),$("#settingIconContainer .settingButton").length&&$("#settingIconContainer .settingButton").on("click",function(){$("#UISettingDialog").fadeIn(),adjustDialog("#UISettingDialog"),centerDialog("#UISettingDialog")}),$("#UISettingForm").length&&initUISettingForm($("#UISettingForm")[0]),"object"==typeof alice)var r=alice.init();var t=$(".slowSwing");"object"==typeof alice&&t.length&&t.each(function(){var t=parseInt(this.dataset.rotate||"5"),e=this.dataset.duration||"2000ms",a=this.dataset.timing||"linear",n=this.dataset.delay||"0ms",i=this.dataset.iteration||"infinite",o=this.dataset.direction||"alternate",s=this.dataset.playstate||"running";r.dance({elems:this,rotate:t,duration:e,timing:a,delay:n,iteration:i,direction:o,playstate:s})});var e=$(".slowTwinkle");"object"==typeof alice&&e.length&&e.each(function(){var t=this,e=t.dataset.opacity||".75",a=parseInt(this.dataset.speed||"700"),n=parseInt(this.dataset.delay||"200");window.setInterval(function(){"1"===(t.dataset.type||"1")?$(t).animate({opacity:e},a,"swing").attr("data-type","0"):$(t).animate({opacity:"1"},a,"swing").attr("data-type","1")},a+n)});var a=$(".showTagCode");a.length&&a.each(function(){var t=this.dataset.source||"";if(t){var e=$(t);if(e.length<1)addConsoleLog("[warnning] source: "+t+" not found.");else{var a=escapeFormatHtml(e[0].outerHTML);this.innerHTML=a}}else addConsoleLog("[warnning] data-source property not defined.")});var n=function(){$(".page").removeClass("landscape portrait").addClass(getWindowWidth()>getWindowHeight()?"landscape":"portrait"),function(){var t=parseInt($("body").data("base-width")),e=parseInt($("body").data("base-font-size"))||10;if(t){var a=getWindowWidth();if(a){var n=a/t*e;$("html").css("font-size",n+"px")}else addConsoleLog("get window width fail.")}}(),$("[data-standard-font-size]").each(function(){var t=parseInt($(this).attr("data-standard-font-size"));if(t){var e=parseInt($(document.body).css("font-size"));$(this).css("font-size",t/e*100+"%")}}),$(".response").each(function(){$(this).css("height","auto");var t=this.offsetWidth,e=parseFloat($(this).data("size-ratio")||$(this).data("ratio")||0),a=t*e;getDebugStatus()&&existDebuggingContent("response")&&(addDebugLog("width="+t),addDebugLog("ratio="+e),addDebugLog("height="+a)),$(this).css("height",a+"px")}),$(".dialog:visible").each(function(){adjustDialog(this),centerDialog(this)})};n(),$(window).on("resize",n)});