var dependencies=["jquery","moment"],cdnList={china:{html5shiv:"https://cdn.bootcss.com/html5shiv/r29/html5.min.js",bootstrap:"https://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css",boorstrapTheme:"https://cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap-theme.min.css",jquery:"https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js",momentWithLocales:"https://cdn.bootcss.com/moment.js/2.18.1/moment-with-locales.min.js"},world:{html5shiv:"https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js",bootstrap:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css",bootstrapTheme:"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css",jquery:"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js",momentWithLocales:"http://momentjs.com/downloads/moment-with-locales.min.js"}};function fixFloatingPointNumber(e,t){var n=new String(e);if(n.indexOf(".")<0)return n+"."+repeatString("0",t);var o=n.split(".");return o[1].length,o[1].length<t?o[1]+=repeatString("0",t-o[1].length):o[1].length>t&&(o[1]=o[1].substr(0,t)),o.join(".")}function enableDebug(){try{return"object"==typeof sessionStorage&&(sessionStorage.setItem("debug","on"),!0)}catch(e){return!0}}var openDebug=enableDebug;function disableDebug(){try{return"object"==typeof sessionStorage&&(sessionStorage.setItem("debug","off"),!0)}catch(e){return!1}}var closeDebug=disableDebug;function getDebugStatus(){try{return"object"==typeof sessionStorage&&"on"===sessionStorage.getItem("debug")}catch(e){return!1}}function addConsoleLog(e){try{return"object"==typeof console&&(console.log(e),!0)}catch(e){return!1}}function addDebugLog(e){return!!getDebugStatus()&&(addConsoleLog("[debug] "+e),!0)}var log=addDebugLog;function addErrorLog(e){return!!getDebugStatus()&&(addConsoleLog("[error] "+e),!0)}function alertDebugLog(e){return!!getDebugStatus()&&(alert("[debug] "+e),!0)}function addDebugInfo(e,t){var n=t||"info";if($("#debugInfoDialog").length){var o="<p>"+("["+n+"] "+e)+"</p>";$("#debugInfoDialog .infoContainer").append(o)}else addConsoleLog("[warnning] element: #debugInfoDialog not exist.")}function printObject(e){var t=createElement("div"),n=createElement("ul");for(var o in e){var r=createElement("li");r.innerHTML=o+": "+e[o],n.appendChild(r)}t.appendChild(n),document.body.appendChild(t)}function cloneObject(e){var t=new Object;for(var n in e)t[n]=e[n];return t}function cloneArray(e){var t=new Array;for(var n in e)t[n]="object"==typeof e[n]?cloneArray(e[n]):e[n];return t}function mergeObject(e,t){var n,o=new Object;for(n in e)o[n]=e[n];for(n in t)o[n]=t[n];return o}function setDebuggingContent(e){"object"==typeof e&&(e=e.join("|"));try{return"object"==typeof sessionStorage&&sessionStorage.setItem("debugging_content",e)}catch(e){return!1}}function existDebuggingContent(e){try{if("object"!=typeof sessionStorage)return!1;var t=sessionStorage.getItem("debugging_content");return!!t&&inArray(e,t.split("|"))}catch(e){return!1}}function disableCopy(){return void 0!==document.oncopy&&(document.oncopy=function(e){return!1},!0)}function disableContextMenu(){return void 0!==document.oncontextmenu&&(document.oncontextmenu=function(){return!1},!0)}function disableCtrlC(){try{var e=function(e){if(e.ctrlKey&&67==e.keyCode)return!1};return document.addEventListener?(document.addEventListener("keydown",e),!0):!!document.attachEvent&&(document.attachEvent("keydown",e),!0)}catch(e){}return!1}function getBrowserFingerPrinting(){var e,t=document.createElement("canvas");if(void 0===t.getContext)return addConsoleLog("Not support browser finger printing on current browser."),"";try{e=t.getContext("2d")}catch(e){return addConsoleLog(e),""}var n="http://"+location.hostname;return e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline=location.hostname,e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(n,4,17),t.toDataURL()}function repeatString(e,t){for(var n="",o=1;o<=t;o++)n+=e;return n}function str_replace(e,t,n){if(t==n)return e;for(var o=new String(e);0<=o.indexOf(t);)o=o.replace(t,n);return o}function replaceData(e,t){for(var n in t)for(;0<=e.indexOf(n);)e=e.replace(n,t[n]);return e}function dataColumnConvert(e,t){var n={};for(var o in e)n[o]=e[o];for(var r in t)n[r]=n[t[r]],delete n[t[r]];return n}function listDataColumnConvert(e,t){for(var n=[],o=0;o<e.length;o++){var r=dataColumnConvert(e[o],t);n.push(r)}return n}function firstLetterUpperCase(e){return 0==e.length?e:e=e[0].toUpperCase()+e.substring(1,e.length)}function getRandomChineseName(e){var t=["赵","钱","孙","李","周","吴","郑","王","冯","陈","褚","卫","蒋","沈","韩","杨","朱","秦","尤","许","何","吕","施","张","孔","曹","严","华","金","魏","陶","姜"],n=["云","化","京","彦","小","志","书","健","思","嘉","明"],o=["腾","东","宏","龙","川","东","福","林","聪","诚","珠"];return t[Math.ceil(Math.random()*(t.length-1))]+n[Math.ceil(Math.random()*(n.length-1))]+o[Math.ceil(Math.random()*(o.length-1))]}function removeLineBreak(e){return e.replace(/[\r\n]/g,"")}function removeSpace(e){return e.replace(/\ +/g,"")}function removeHtmlTag(e){return e.replace(/<[^<>]+?>/g,"")}function filterImgTag(e){return new RegExp("<img[^>]*>").exec(e)}function filterImageUrlList(e){for(var t=$(e).find("img"),n=[],o=0;o<t.length;o++)n.push(t.eq(o).attr("src"));return n}function escapeHtml(e){return e.replace(/[<>&"]/g,function(e){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[e]})}function EncodeHtml(e){return 0==e.length?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/\n/g,"<br/>")}function DecodeHtml(e){return 0==e.length?"":e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/<br\/>/g,"\n")}function removeSpaceInAheadOfLine(e){for(var t=typeof e,n="object"==t?e:[e],o=0;o<n.length;o++)n[o]=n[o].replace(new RegExp("^( )+"),"");return"object"==t?n:n[0]}function data2String(e){var t="";if("object"==typeof e){for(var n in e)t+=n+": "+e[n]+"  ";return t}if("array"!=typeof e)return e;for(n=0;n<e.length;n++)t+=e[n],n+1<e.length&&(t+=", ");return t}function createUrl(e,t){if("object"!=typeof t)return e;var n="";for(var o in t)n.length&&(n+="&"),n+=o+"="+t[o];return 0<=e.indexOf("?")?e+="&":e+="?",e+=n}function getBodyHtml(e){try{var t=e.split(/\<body[^\>]*\>/);if(t.length<2)return log("can not found string: /<body[^>]*>/"),!1;e=t[1].replace("</body>","")}catch(e){return log(e),!1}return e}function isRootPath(e){return e.lastIndexOf("/")==e.length-1&&(e=e.substr(0,e.length-1)),"/"==e||0==e.length}function getParentFolder(e){return e.lastIndexOf("/")==e.length-1&&(e=e.substr(0,e.length-1)),e.lastIndexOf("/")<0||0==e.lastIndexOf("/")?"":e.substr(0,e.lastIndexOf("/"))}function adjustUrl(e){for(var t=[],n=e.split("/"),o=0;o<n.length;o++)"."!==n[o]&&(".."===n[o]?t.pop():t.push(n[o]));return t.join("/")}function concatPath(e,t){return e.substr(-1,1),e+="/","/"===t.substr(0,1)&&(t=t.substr(1,t.length)),e+t}function simplifyPath(e){"./"==(e=e.split("/./").join("/")).substr(0,2)&&(e=e.substr(2,e.length));for(var t=new RegExp("([^/]*)/../");0<=e.search(t);)e=e.replace(t,"");return e}function getAbsoluteBaseUrl(){var e=location.protocol,t=location.hostname,n=location.port,o=e+"//"+t;return 80==n&&443==n||(o+=":"+n),o+="/"}function json_encode(e){return"undefined"!=typeof JSON&&JSON.stringify(e)}function json_decode(e){return"undefined"!=typeof JSON?JSON.parse(e):"undefined"!=typeof json_parse&&json_parse(e)}function inArray(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function removeArrayElement(e,t){for(var n=new Array,o=0;o<e.length;o++)e[o]!=t&&n.push(e[o]);return n}function getFreshText(e){try{return moment(e).fromNow()}catch(e){addConsoleLog(e)}return""}function formatTime(e,t){if(!t)return"";var n="object"==typeof t?t:new Date(t);return moment(n).format(e)}function getAMPM(e,t){switch(t||(t="YY-MM-dd HH:mm:ss"),typeof e){case"object":try{return e.getHours()<12?"am":"pm"}catch(e){addConsoleLog(e)}case"number":return new Date(e).getHours()<12?"am":"pm";case"string":var n=moment(e,t);return parseInt(n.format("H"))<12?"am":"pm"}return""}function printTime(t,n){n||(n=$(t).data("format")||"YYYY-MM-DD H:mm:ss"),setInterval(function(){try{var e=moment().format(n);$(t).html(e)}catch(e){addConsoleLog(e)}},1e3)}function getNowTime(e){return e||(e="YYYY-MM-DD H:mm:ss"),moment().format(e)}function countBackwards(t,e){"object"!=typeof e&&(e={});var n=e.callback||null,o=(parseInt(t.innerHTML),setInterval(function(){try{var e=parseInt(t.innerHTML);e--,(t.innerHTML=e)<=0&&(clearInterval(o),n&&n(t))}catch(e){log(e)}},1e3))}function setCountBackwards(e,t){if("undefined"==typeof $)return log("[error] missing $ function."),!1;var n=$(e);"object"!=typeof t&&(t={});var o=n.html();n.data("default",o);var r=t.process||n.data("process"),a=t.finish||n.data("finish"),i=t.callback||null,s=t.second||parseInt(n.data("second"))||60;if(s<=0)addConsoleLog("[error] setCountBackwards must give a second param.");else{log("second="+s);var l=null,c=function(){try{s--,n.html(r.replace("{n}",s)),s<=0&&(n.html(a),clearInterval(l),i&&i(e))}catch(e){log(e)}};c(),l=setInterval(c,1e3)}}function getElement(e){return document.getElementById(e)}function get(e){try{return"function"!=typeof document.querySelector?(addConsoleLog("querySelector is not supported in current client."),!1):document.querySelector(e)}catch(e){return!1}}function createElement(e,t,n){var o=document.createElement(e);if(null!==t)for(var r in t)o.setAttribute(r,t[r]);return"object"==typeof n?o.innerHTML=n.outerHTML:"string"==typeof n&&(o.innerHTML=n),o}function printTag(e,t,n){var o=createElement(e,t,n);document.writeln(o.outerHTML)}function printStylesheetLink(e){document.writeln('<link rel="stylesheet" href="'+e+'"/>')}function loadStylesheet(e){var t=createElement("link",{href:e,rel:"stylesheet"});document.head.appendChild(t)}function loadScript(e,t){t=t||{};var n=createElement("script",{src:e}),o=t.onload||function(){};o&&(n.onload=o),document.body.appendChild(n)}function execScript(url,callback){$.ajax(url,{dataType:"text",success:function(text){try{eval(text)}catch(e){callback(e,"")}callback&&callback(null,text)},error:function(e,t){callback&&callback({request:e,message:t},"")}})}function loadContent(e){var t=e.id||"",n=e.html||"",o=e.css||"",r=e.script||"",a=e.target||document.body,i=e.cache||!1,s=e.callback||null;if(!t)return addConsoleLog("[error] missing id param for loadContent function."),!1;if(!n)return addConsoleLog("[error] missing html param for loadContent function."),!1;var l="",c=function(){r&&loadScript(r),s&&s()},u=function(e){$.ajax({url:e,success:function(e){(l=e,i)&&setSessionData(t+"_html",l);$(a).append(l),c()},error:function(){setTimeout(function(){u(e)},5e3)}})};i&&(l=getSessionData(t+"_html")||"");return l?($(a).append(l),c()):u(n),o&&loadStylesheet(o),!0}function downloadFile(e){if(isIE()){var t=window.open(e);t.onload=function(){try{this.document.designMode="ON"}catch(e){addConsoleLog(e.message)}try{this.document.execCommand("SaveAs"),this.close()}catch(e){addConsoleLog(e.message)}};try{"complete"==t.document.readyState&&t.onload()}catch(e){addConsoleLog(e.message),t.onload()}}else{var n=createElement("a",{href:e,target:"_blank",download:""});n.style.display="none",document.body.appendChild(n),n.click(),n=null}}function setHeightEqualToWidth(e){e.style.height=e.offsetWidth+"px"}function reloadImage(e){var t=createUrl(e.src.split("?")[0],{t:(new Date).getTime().toString().substring(-4,4)});e.src=t}function setImageFill(e){e.onload=function(){$(this.parentNode).innerWidth();var e=$(this.parentNode).innerHeight();this.style.width="100%",this.style.height="auto",0<e&&this.height<e&&(this.style.width="auto",this.style.maxWidth="none",this.style.height="100%")},0<e.width&&0<e.height&&e.onload()}function isImage(e){formatList=["jpg","jpeg","png","gif","svg"];for(var t=0;t<formatList.length;t++)if(e.substr(0-formatList[t].length)===formatList[t])return!0;return!1}function setElementMiddlePosition(e){if("string"==typeof e){var t=$(e);if(!t.length)return!1;e=t[0]}var n=e.parentNode;$(n).css("overflow","hidden"),$(e).css("overflow","hidden");var o=(n.offsetHeight-e.offsetHeight)/2;return $(e).css("margin-top",o+"px"),!0}function loadImage(e,t){var n=new Image;"object"!=typeof t&&(t={});var o=t.onerror?t.onerror:null,r=t.onload?t.onload:null,a=t.onabort?t.onabort:null;return o&&(n.onerror=o),r&&(n.onload=r),a&&(n.onabort=a),n.src=e,n}function createImage(e,t){var n=new Image;for(var o in void 0===t&&(t=new Array),t)n[o]=t[o];return n.src=e,n}function setImageCenteredFill(e){if(!0===e.complete){e.style.maxHeight="none",e.style.maxWidth="none",e.style.width="auto",e.style.height="auto",image_width=e.offsetWidth,image_height=e.offsetHeight;var t=e.parentNode;container_width=t.offsetWidth,container_height=t.offsetHeight,container_width/container_height<image_width/image_height?(e.style.height="100%",e.style.width="auto",e.style.marginLeft=(container_width-e.offsetWidth)/2+"px"):(e.style.height="auto",e.style.width="100%",e.style.marginTop=(container_height-e.offsetHeight)/2+"px")}else e.onload=function(){setImageCenteredFill(this)}}function checkAudio(e){var t=createAudio();return!1!==t&&!!t.canPlayType("audio/"+e)}function isVideo(e){formatList=["webm","mp4"];for(var t=0;t<formatList.length;t++)if(e.substr(0-formatList[t].length)===formatList[t])return!0;return!1}function supportsFullScreen(e){!e&&(e="video");var t=createElement(e);return t.requestFullscreen|t.webkitRequestFullscreen|t.mozRequestFullScreen|t.msRequestFullscreen|t.oRequestFullscreen}function setFullScreenVideo(e){try{if(e.requestFullscreen)return e.requestFullscreen(),!0;if(e.mozRequestFullScreen)return e.mozRequestFullScreen(),!0;if(e.msRequestFullscreen)return e.msRequestFullscreen(),!0;if(e.oRequestFullscreen)return e.oRequestFullscreen(),!0;if(e.webkitRequestFullscreen)return e.webkitRequestFullScreen(),!0}catch(e){addConsoleLog(e)}return!1}function setAutoCheckVideoToPlay(e){if("string"==typeof e){var t=$(e);if(!t.length)return!1;e=t[0]}return"video"!==e.tagName.toLowerCase()?(addErrorLog("element param is not a video element."),!1):(setInterval(function(){e.paused&&e.play()},1e3),!0)}function setTakeTurns(o,e){var r=e.interval||10,a=e.number||1;return getDebugStatus()&&existDebuggingContent("setTakeTurns")&&(addDebugLog("interval="+r),addDebugLog("number="+a)),setInterval(function(){var e="string"==typeof o?$(o):o,t=e.length,n=e.filter(":hidden").length;t<=(n+=a)&&(n=0),getDebugStatus()&&existDebuggingContent("setTakeTurns")&&(addDebugLog("interval="+r),addDebugLog("number="+a),addDebugLog("count="+t),addDebugLog("hideCount="+n)),e.show().filter(":lt("+n+")").hide()},1e3*r)}function setTakeTurnDisplayImage(o,e){!e&&(e=5);var t=(o=$(o)).find(".imageItem");t.length<1||(t.removeClass("hidden").hide().eq(0).show(),setInterval(function(){var e=o.find(".imageItem"),t=e.filter(":visible"),n=e.index(t);++n>=e.length&&(n=0),t.fadeOut("fast",function(){e.eq(n).fadeIn()})},1e3*e))}function setVideoPlaylist(t,n){if("string"!=typeof t||(t=getElement(t)))try{0===n.length&&(t.pause(),t.src=""),t.pause(),t.src=n[0],$(t).data("currentIndex",0),t.load(),t.play(),t.onended=function(){this.src;var e=$(t).data("currentIndex")||"0";e=parseInt(e),++e>=n.length&&(e=0),this.pause(),this.src=n[e],$(t).data("currentIndex",e),this.load(),this.play()}}catch(e){addConsoleLog(e)}}function canvasSupport(){return"function"==typeof createElement("canvas").getContext}function addUrlParam(e,t,n){var o=e;return e.indexOf("?")<0?o+="?":o+="&",o+=t+"="+n}function getUrlParam(e){var t=arguments[1]?arguments[1]:null,n=location.search.replace("?","");if(!n.length)return t;for(var o=n.split("&"),r=-1,a=0;a<o.length;a++)if(0===(r=o[a].indexOf(e+"=")))return o[a].substring(r+1+e.length);return t}function getScrollTop(){return document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:!!document.body&&document.body.scrollTop}function getScrollHeight(){return document.documentElement&&document.documentElement.scrollHeight?document.documentElement.scrollHeight:!!document.body&&document.body.scrollHeight}function pageDown(e){if("string"==typeof e){var t=$(e);if(!t.length)return;e=t[0]}getDebugStatus()&&existDebuggingContent("pageDown")&&(addDebugLog("scroll height: "+e.scrollHeight),addDebugLog("offset height: "+e.offsetHeight)),e.scrollHeight>e.offsetHeight&&(e.scrollTop<e.scrollHeight-e.offsetHeight?e.scrollTop+=e.offsetHeight:e.scrollTop=0)}function setAutoPageDown(e,t){t||(t=10),window.setInterval(function(){pageDown(e)},1e3*t)}function setMarquee(e,t){if("string"==typeof e){var n=$(e);if(!n.length)return;e=n[0]}interval||(interval=10);e.find();return window.setInterval(function(){getDebugStatus()&&existDebuggingContent("setMarquee")&&(addDebugLog("scroll height: "+e.scrollLeft),addDebugLog("offset height: "+e.offsetWidth),addDebugLog("scroll top: "+e.scrollTop)),e.scrollHeight>e.offsetHeight&&(e.scrollTop<e.scrollHeight-e.offsetHeight?e.scrollTop+=e.offsetHeight:e.scrollTop=0)},1)}function getWindowHeight(){if("undefined"!=typeof $)return $(window).outerHeight();var e=window.innerHeight||window.height;return e||0}function getWindowWidth(){if("undefined"!=typeof $)return $(window).outerWidth();var e=window.innerWidth||window.width;return e||0}function getBodyHeight(){var e=document.body.offsetHeight||document.documentElement.offsetHeight||document.body.clientHeight||$(document.body).height();return e||0}function setBodyMinHeight(){$(window).on("resize",function(){$(document.body).css("height","auto");var e=getBodyHeight(),t=getWindowHeight();if(getDebugStatus()&&existDebuggingContent("setBodyMinHeight")&&(addDebugLog("bodyHeight= "+e),addDebugLog("windowHeight= "+t)),0===e||0===t)return!1;e<t&&$(document.body).css("height",t+"px")}).trigger("resize")}function isOverflowHeight(e){var t=$(e);if(!t.length)return!1;for(var n=t[0],o=n.children,r=0,a=0;a<o.length;a++)r+=parseInt($(o[a]).css("margin-top").replace("px","")),r+=o[a].offsetHeight,r+=parseInt($(o[a]).css("margin-bottom").replace("px",""));return r>n.offsetHeight}function createDialog(e){}function adjustDialog(e){getWindowWidth();var t=$(e).outerHeight()-$(e).find(".dialog_header").outerHeight()-$(e).find(".dialog_footer").outerHeight();$(e).find(".dialog_body").css("height",t+"px")}function centerDialog(e){$(e).css({margin:"0",left:"0",top:"0"});var t=getWindowWidth(),n=getWindowHeight(),o=(t-$(e).outerWidth())/2,r=(n-$(e).outerHeight())/2;$(e).css({"margin-left":"0","margin-top":"0",left:o+"px",top:r+"px"})}function initDialogAction(){$(".layer .panel .close_button").on("click",function(){$(this).parents(".layer").fadeOut()}),$(".dialog .close_button").on("click",function(){var e=$(this).parents(".dialog"),t=$(this).parents(".layer");t.length?t.fadeOut():e.fadeOut()})}function openDialog(e,t){"object"!=typeof t&&(t={});var n=t.onConfirm||function(){},o=t.onCancel||function(){},r=t.onShow||function(){},a=$(e),i=a.find(".dialog_body form"),s=i.length?i[0]:null;a.find(".confirmButton").on("click",function(){n(a[0],s)}),a.find(".cancelButton").on("click",function(){o(a[0])}),$(e).fadeIn(function(){r(a[0])}),adjustDialog(a[0]),centerDialog(a[0])}function closeDialog(e){$(e).fadeOut()}function showMessageBox(e,t){!t&&(t="提示");var n=$("#mainMessageBox");return n?(n.find(".dialog_body").html("<p>"+e+"</p>"),n.find(".dialog_header .dialog_title").html(t),n.fadeIn(),centerDialog(n),!0):(addConsoleLog("Element #mainMessageBox not exist."),!1)}function getBrowserCore(){var e=window.navigator.userAgent,t=RegExp("Gecko").test(e),n=RegExp("AppleWebKit").test(e),o=RegExp("Presto").test(e),r=RegExp("IE").test(e);return n?"Webkit":t?"Gecko":o?"Presto":r?"Trident":"unknown"}function isIE(){return"Trident"==getBrowserCore()}function getIEsVersion(){var e=window.navigator.userAgent;if(!e.search(RegExp("MSIE [0-9.]+;")))return 0;var t=e.match(RegExp("MSIE [0-9]+.[0-9]+;"))[0];return t=t.replace(RegExp("MSIE ([0-9])+.[0-9]+;"),"$1"),Number(t)}function getBrowserLanguage(){var t="";try{t=(navigator.language||navigator.browserLanguage).toLowerCase()}catch(e){return addConsoleLog(e),t}return t}function checkFile(e,t){return 0===e.type.indexOf(t)}function checkFileIsImage(e){return!!/image\/\w+/.test(e.type)}function fileReaderSupport(){return"undefined"!=typeof FileReader}function readFile(e,t,n){if(!fileReaderSupport())return addConsoleLog("[error] FileReader API is not supported."),!1;"object"!=typeof n&&(n={});var o=n.onabort?n.onabort:null,r=n.onload?n.onload:null,a=n.onloadend?n.onloadend:null,i=n.onloadstart?n.onloadstart:null,s=n.onprogress?n.onprogress:null,l=new FileReader;switch(o&&(l.onabort=o),r&&(l.onload=r),a&&(l.onloadend=a),i&&(l.onloadstart=i),s&&(l.onprogress=s),t){case"data_url":return l.readAsDataURL(e),!0}return!1}function convertImage2Canvas(e,t,o){if(!canvasSupport())return!1;var n=null;"object"!=typeof t&&(t={});var r=t.image_min_width?t.image_min_width:-1,a=t.image_min_height?t.image_min_height:-1,i=t.image_max_width?t.image_max_width:-1,s=t.image_max_height?t.image_max_height:-1;getDebugStatus()&&existDebuggingContent("convertImage2Canvas")&&(addDebugLog("image_max_width: "+i),addDebugLog("image_max_height: "+s));var l=t.canvas_width?t.canvas_width:-1,c=t.canvas_height?t.canvas_height:-1,u=t.onerror?t.onerror:null;"string"==typeof e?(n=new Image).src=e:n=e,u&&(n.onerror=u),n.onload=function(){var e=this.width/this.height;(-1<r||-1<a||-1<i||-1<s)&&((this.width<r||this.height<a)&&(a<=r/e?(this.width=r,this.height=this.width/e):(this.height=a,this.width=this.height*e)),-1<i&&this.width>i&&-1<s&&this.height>s?i/e<=s?(this.width=i,this.height=this.width/e):(this.height=s,this.width=this.height*e):-1<i&&this.width>i?(this.width=i,this.height=this.width/e):-1<s&&this.height>s&&(this.height=s,this.width=this.height*e));var t=createElement("canvas"),n=t.getContext("2d");t.width=-1<l?l:this.width,t.height=-1<c?c:this.height,n.drawImage(this,0,0,t.width,t.height),o&&o(t)}}function getForm(e){return e.form?e.form:null}function getFormData(e){if(void 0===e.elements)return!1;for(var t={},n=0;n<e.elements.length;n++){var o=e.elements[n].type;if(""!==(r=e.elements[n].name))switch(o){case"checkbox":t[e.elements[n].name]=new Array;break;default:t[e.elements[n].name]=""}}for(n=0;n<e.elements.length;n++){o=e.elements[n].type;var r=e.elements[n].name,a=e.elements[n].value;if(""!==r)switch(o){case"text":t[r]=a;break;case"radio":e.elements[n].checked&&(t[r]=a);break;case"checkbox":e.elements[n].checked&&t[r].push(a);break;default:t[r]=a}}return t}function setFormData(e,t){if("string"==typeof e){var n=e;if(!(e=document.getElementById(e)))return addErrorLog("form dom with id:"+n+" not found."),!1}for(var o in t)setFormControl(e,o,t[o]);return!0}function setFormControl(e,t,n){if("string"==typeof e){var o=e;if(!(e=document.getElementById(e)))return addErrorLog("form dom with id:"+o+" not found."),!1}for(var r=$(e).find('*[name="'+t+'"]'),a=0;a<r.length;a++){var i=r[a];switch(i.nodeName.toLowerCase()){case"input":switch(i.type){case"checkbox":inArray(i.value,n)&&(i.checked=!0);break;case"radio":i.value==n&&(i.checked=!0);break;case"password":getDebugStatus()&&existDebuggingContent("setFormControl")&&addDebugLog("skip inputbox type:password.");break;case"file":getDebugStatus()&&existDebuggingContent("setFormControl")&&addDebugLog("skip inputbox type:file.");break;case"text":default:i.value=n}break;case"textarea":r[a].innerHTML=n;break;case"select":default:i.value=n}}return!0}function checkForm(e){if("string"==typeof e){var t=e;if(!(e=document.getElementById(e)))return addErrorLog("form dom with id:"+t+" not found."),!1}for(var n=0;n<e.length;n++){var o=e[n].required||!1,r=e[n].value;if(o&&""===r)return e[n].focus(),!1}return e.checkValidity()}function formIsLocked(e){return!("string"==typeof e&&!(e=document.getElementById(e)))&&(void 0===e.dataset.lock?!(e.dataset.lock="off"):"on"===e.dataset.lock)}var isLockedForm=formIsLocked;function lockForm(e){if("string"==typeof e&&!(e=document.getElementById(e)))return;e.dataset.lock="on"}function unlockForm(e){if("string"==typeof e&&!(e=document.getElementById(e)))return;e.dataset.lock="off"}function formNoMoreData(e){("string"!=typeof e||(e=document.getElementById(e)))&&(e.dataset.noMoreData="on")}var setFormNoMoreData=formNoMoreData;function formMoreData(e){("string"!=typeof e||(e=document.getElementById(e)))&&(e.dataset.noMoreData="off")}var setFormHasMoreData=formMoreData;function formHasMoreData(e){return"string"==typeof e&&!(e=document.getElementById(e))||(void 0===e.dataset.noMoreData||(e.dataset.noMoreData="off")===e.dataset.noMoreData)}var isFormHasMoreData=formHasMoreData;function formAjaxSubmit(e,t){return!t&&(t={}),void 0!==t.url||(t.url=e.dataset.api||"",t.url)?(void 0===t.type&&(t.type=e.method||"post"),t.data=$(e).serialize(),$.ajax(t),!0):(addConsoleLog("[error] missing url param for ajax submit form."),!1)}function selectboxAddOptions(e,t){if("string"==typeof e){var n=$(e);if(!n.length)return;e=n[0]}for(var o=0;o<t.length;o++){var r=createElement("option",{value:t[o].id});r.innerHTML=t[o].name,e.appendChild(r)}}function setCheckAllAction(e){e.onchange=function(){for(var e=this.checked,t=this.form.getElementsByTagName("input"),n=0;n<t.length;n++)"checkbox"===t[n].type&&(t[n].checked=e)}}function setCheckAllChildrenAction(e){$(e).on("change",function(){var e=this.checked,t=this.parentNode;"label"===t.nodeName.toLowerCase()&&(t=t.parentNode);for(var n=$(t).find("ul").find('input[type="checkbox"]'),o=0;o<n.length;o++)n[o].checked=e})}function setTextareaAutoIncreaseHeight(e){$(e).on("input",function(){this.offsetHeight<this.scrollHeight&&(this.style.height=this.scrollHeight+"px")})}function initImportButton(e,t){"object"!=typeof t&&(t={});var n={name:"ImportHelper",control:createElement("input",mergeObject({type:"file"},{name:t.name||""}))};return $(n.control).hide(),document.body.appendChild(n.control),$(n.control).ajaxfileupload(t),$(e).on("click",function(){$(n.control).trigger("click")}),n}function initFileUpload(e,t){void 0===t&&(t={});var r=t.success||null,n=t.error||null,a=t.complete||null,i=(t.method,t.url||"");$(e).on("change",function(){var o=this,e=new FormData;e.append(this.name||"file",this.files[0]),$.ajax({url:i,type:"post",dataType:"json",data:e,contentType:!1,processData:!1,success:function(e,t,n){r&&r(e,t,n,o)},error:n,complete:a})})}function renderPaginationPanel(e,t){var n=$('<ul class="pagination">        <li class="previous_page_item disabled">            <a class="previous_page_link" href="javascript:;" aria-label="上一页">                <span aria-hidden="true">上一页</span>            </a>        </li>        <li class="active current"><a href="javascript:;">1</a></li>        <li class="next_page_item">            <a class="next_page_link" href="javascript:;" aria-label="下一页">                <span aria-hidden="true">下一页</span>            </a>        </li>    </ul>');return $(e).append(n),n[0]}function bindPaginationPanelAction(e){var t=$(e).find(".previous_page_link"),n=$(e).find(".next_page_link"),r=$(e).find(".current a");t.on("click",function(){var e=$(this).parents("form");if(e.length){var t=parseInt($(e).find(".form_page").val());!t&&(t=1),1!==t&&(t--,$(e).find(".form_page").val(t),r.html(t),e.submit())}}),n.on("click",function(){var e=$(this).parents("form");if(e.length){var t=parseInt($(e).find(".form_page").val());!t&&(t=1);var n=$(this).parents(".pagination"),o=parseInt(n.data("count"));if(o&&t===o)return getDebugStatus()&&existDebuggingContent("bindPaginationPanelAction")&&addDebugLog("已经是最后1页了。"),!1;t++,$(e).find(".form_page").val(t),r.html(t),e.submit()}})}function updatePaginationPanel(e,t){var n="[info] 更新页码面板；",o=t.page?t.page:parseInt($(e).find(".current a").html());!o&&(o=1);var r=t.count?t.count:null;n+="当前页码："+o+"；",$(e).find(".current a").html(o),1===o?$(e).find(".previous_page_item").addClass("disabled"):$(e).find(".previous_page_item").removeClass("disabled"),r&&(n+="总页数："+r+"。",$(e).data("count",r),o===r?$(e).find(".next_page_item").addClass("disabled"):$(e).find(".next_page_item").removeClass("disabled")),getDebugStatus()&&existDebuggingContent("updatePaginationPanel")&&addDebugLog(n)}function initTextboxActions(e,t){var n=t.change?t.change:null,o=t.input?t.input:null;n&&(e.onchange=function(){var e=this.value,t=e.length;n(this,e,t)}),o&&(e.oninput=function(){var e=this.value,t=e.length;o(this,e,t)})}function addInputboxAutocompleteValue(e,t){var n=document.createElement("form");n.action="javascript:;",n.method="post",n.style.display="none";var o=document.createElement("input");o.type="text",o.name=e,o.value=t,n.appendChild(o),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}function isSupportCrossOrigin(){return"undefined"!=typeof XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials}function generalAjaxErrorCallback(e,t,n){var o="连接失败\n";addConsoleLog(o+=e.status+" "+e.statusText+"\n")}var ajax=function(e,t,n){if("undefined"==typeof api)return addConsoleLog("[error] api variable is undefined."),!1;var o=api[e].url,r=base_url+o,a=api[e].type;$.ajax({url:r,type:a,dataType:"json",data:t,error:ajaxErrorCallback,success:function(e){n&&n(e)}})};function createDialog(e,t){var n=arguments[3]?arguments[3]:new Object,o={class:"dialog"};n.id&&(o.id=n.id);var r=createElement("div",o),a=createElement("div",{class:"dialog_header"});r.appendChild(a);var i=createElement("div",{class:"dialog_title"},e);a.appendChild(i);var s=createElement("div",{class:"dialog_buttons"});a.appendChild(s);var l=createElement("button",{class:"button_close dialog_close"},"x");s.appendChild(l),l.onclick=function(){var e=this.parentNode.parentNode.parentNode;e.parentNode.removeChild(e)};var c=createElement("div",{class:"dialog_body"},t);return r.appendChild(c),r}function removeDialog(e){e&&e.parentNode&&("object"!=typeof e&&(e=getElement(e)),e.parentNode.removeChild(e))}function createProgressDialog(e,t){var n=createElement("div",{id:e,class:"dialog dialog_progress"}),o=createElement("div",{class:"box_progress"});n.appendChild(o);var r=createElement("div",{class:"progress"});o.appendChild(r);var a=createElement("div",{class:"progress-bar progress-bar-striped active"});r.appendChild(a),a.style.width=t+"%",document.body.appendChild(n)}function updateProgressDialog(e,t){var n=getElement(e);if(!n)return log("dialog ("+e+") not found."),!1;if(document.getElementsByClassName){var o=n.getElementsByClassName("progress-bar");o.length&&(o[0].style.width=t+"%")}else $(n).find(".progress-bar").css("width",t+"%");return!0}function removeProgressDialog(e){var t=getElement(e);return t?(t.parentNode.removeChild(t),!0):(log("dialog ("+e+") not found."),!1)}function showLoadingIcon(e){$("#loading_icon_container").fadeIn(e||"fast")}function hideLoadingIcon(e){$("#loading_icon_container").fadeOut(e||"fast")}function getMainAudioController(){return getElement("mainAudioController")}function playMusic(){$("#mainMusicControlButton").removeClass("stopped");var e=getElement("mainAudioController");return!!e&&(e.play(),!e.paused)}function pauseMusic(){$("#mainMusicControlButton").addClass("stopped");var e=getElement("mainAudioController");return!!e&&(e.pause(),!!e.paused)}function getMusicPlayStatus(){var e=getElement("mainAudioController");return!!e&&!e.paused}function toggleMusic(){return getMusicPlayStatus()?pauseMusic():playMusic()}function playLetter(e,t){!e&&(e=0);var n=$("#letter_content_box > *");e+1>n.length||(n.eq(e).fadeIn(3e3),window.setTimeout(function(){playLetter(e+1,t)},t))}function loadDependencies(){inArray(new String("jQuery").toLowerCase(),dependencies)&&"undefined"==typeof jQuery&&("zh-cn"===getBrowserLanguage()?document.body.appendChild(createElement("script",{src:cdnList.china.jquery})):document.body.appendChild(createElement("script",{src:cdnList.world.jquery}))),inArray("moment",dependencies)&&"undefined"==typeof moment&&("zh-cn"===getBrowserLanguage()?document.body.appendChild(createElement("script",{src:cdnList.china.momentWithLocales})):document.body.appendChild(createElement("script",{src:cdnList.world.momentWithLocales})))}function includeDependencies(){inArray(new String("jQuery").toLowerCase(),dependencies)&&"undefined"==typeof jQuery&&("zh-cn"===getBrowserLanguage()?printTag("script",{src:cdnList.china.jquery}):printTag("script",{src:cdnList.world.jquery})),inArray("moment",dependencies)&&"undefined"==typeof moment&&("zh-cn"===getBrowserLanguage()?printTag("script",{src:cdnList.china.momentWithLocales}):printTag("script",{src:cdnList.world.momentWithLocales}))}function loadHtml(e,n,t){void 0===t&&(t={}),t.dataType="html",t.success=function(e){var t=$(n);t.after(e),t.remove()},$.ajax(e,t)}function loadAppendHtml(e,t,n){void 0===n&&(n={}),n.dataType="html",n.success=function(e){$(t).append(e)},$.ajax(e,n)}function getSessionData(e){return"undefined"==typeof sessionStorage?null:sessionStorage.getItem(e)}function setSessionData(e,t){return"undefined"!=typeof sessionStorage&&(sessionStorage.setItem(e,t),!0)}function initTreeView(e){$(e).find(".folderNode .folderIcon, .folderNode .folderName").on("click",function(){$(this).parent().parent().toggleClass("extended")})}function setUISetting(e,t){var n="ui_setting_"+e;localStorage.setItem(n,t)}function getUISetting(e,t){t=t||null;var n="ui_setting_"+e;return localStorage.getItem(n)||t}function initUISettingForm(form,options){if(getDebugStatus()&&existDebuggingContent("initUISettingForm")&&addDebugLog("init UI setting form."),"string"!=typeof form||(form=getElement(form),form)){options=options||{};for(var onchange=options.onchange||null,controlIndex=0;controlIndex<form.length;controlIndex++){var control=form[controlIndex],name=control.name,target=control.dataset.target||"body",property=control.dataset.property||"",defaultValue=control.dataset.default||"",expression=control.dataset.expression||"";if(name)if(property){$(control).on("change",function(event){var name=this.name,target=this.dataset.target||"body",property=this.dataset.property||"",expression=this.dataset.expression||"",value=this.value;if(property){if(setUISetting(name,value),expression)try{eval("value = "+expression)}catch(e){addConsoleLog("[error] "+e.message)}$(target).css(property,value),onchange&&onchange()}else addConsoleLog("[warnning] control missing data-property value.")});var setting=getUISetting(name);setting&&setting!=defaultValue&&(setFormControl(form,name,setting),$(control).change())}else addConsoleLog("[warnning] control missing data-property value.")}onchange&&onchange()}else addConsoleLog("[error] form not found.")}function applyNativeLanguage(e,t,n,o){e=e||getBrowserLanguage()||t,t=t||"en-us",n=n||[],o=o||{},""!=(e=e.toLowerCase())&&inArray(e,n)||(e=t),loadLang(e,function(e){e||log("[error] load language fail."),$("*[data-native]").each(function(){var e="";if(""==$(this).attr("data-native")?(e="input"==this.nodeName.toLowerCase()?$(this).attr("placeholder"):this.innerHTML,$(this).attr("data-native",e)):e=$(this).attr("data-native"),""!=e){void 0===window.nativeLanguage&&(window.nativeLanguage={});var t="string"==typeof window.nativeLanguage[e]?window.nativeLanguage[e]:"";t&&("input"==this.nodeName.toLowerCase()?$(this).attr("placeholder",t):this.innerHTML=t)}})},o)}function loadLang(e,n,t){e=((t=t||{}).baseUrl||"")+"./lang/"+e+".json",$.ajax(e,{success:function(e){for(var t in void 0===window.nativeLanguage&&(window.nativeLanguage={}),e)window.nativeLanguage[t]=e[t];n&&n(!0,e)},error:function(){n&&n(!1,"")}})}function initNativeLanguage(e){var t=e.baseUrl||"./",n=e.defaultLanguage||"en-us",o=e.languageSupportedList||[n],r="";if("object"==typeof localStorage)try{r=localStorage.getItem("language")||""}catch(e){log(e)}if(!r)try{r=$.cookie("language")}catch(e){log(e)}return applyNativeLanguage(r,n,o,{baseUrl:t}),r}function initLanguageSelectbox(e,t){var n=t.baseUrl||"./",o=t.defaultLanguage||"en-us",r=t.currentLanguage||o,a=t.languageSupportedList||[];$(e).val(r).on("change",function(){var e=this.value;applyNativeLanguage(e,o,a,{baseUrl:n});var t=!1;if("object"==typeof localStorage)try{localStorage.setItem("language",e),t=!0}catch(e){log(e)}if(!t)try{t=$.cookie("language",e)}catch(e){log(e)}})}function parseNativeLang(e){for(var t in void 0===window.nativeLanguage&&(window.nativeLanguage={}),window.nativeLanguage)if(t==e)return window.nativeLanguage[t];return e}function initAutoMoveInWindow(e){var h;$(e).css({position:"fixed",top:"50%",left:"50%",bottom:"auto",right:"auto"}).attr("data-run","on"),(h=function(e){if("on"==(e.dataset.run||"on")){var t=getWindowWidth(),n=getWindowHeight(),o=e.offsetWidth,r=e.offsetHeight,a=e.offsetLeft,i=e.offsetTop,s=t-o,l=n-r,c=0,u=0,d=parseInt(e.dataset.dir||1);switch(d=4<d+1?1:d+1){case 1:c=Math.random()*(s-1);break;case 2:u=Math.random()*(l-1),c=s;break;case 3:c=Math.random()*(s-1),u=l;break;case 4:u=Math.random()*(l-1)}var g=parseInt(e.dataset.speed||80),f=Math.sqrt(Math.pow(c-a,2)+Math.pow(u-i,2));$(e).attr("data-dir",d).animate({left:c,top:u},f/g*1e3,"linear",function(){h(e)})}else setTimeout(function(){h(e)},1e3)})(e)}