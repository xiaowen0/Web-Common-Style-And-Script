function initDrawingBoard(t){var o=$(t);if(o.length<1)return addConsoleLog("[warnning] element not found in initDrawingBoard()."),null;o.find("canvas");var a=o.find("canvas")[0];a.width=a.offsetWidth,a.height=a.offsetHeight;var n={name:"drawingBoard",target:t,isTouching:!1,touchPoint:{x:0,y:0},canvas:a,canvasContext:a.getContext("2d"),canvasWidth:a.width,canvasHeight:a.height,updateTouchPoint:function(t){this.touchPoint=t},drawLine:function(t,o){this.canvasContext.beginPath(),this.canvasContext.moveTo(t.x,t.y),this.canvasContext.lineTo(o.x,o.y),this.canvasContext.stroke(),this.canvasContext.closePath()},setRainbowColor:function(){var t=this.canvasContext.createLinearGradient(0,0,this.canvasWidth,this.canvasHeight);t.addColorStop(0,"#f50a0a"),t.addColorStop(.083,"#f57f0a"),t.addColorStop(.16,"#f5f50a"),t.addColorStop(.25,"#7ff50a"),t.addColorStop(.333,"#0af50a"),t.addColorStop(.41,"#0af57f"),t.addColorStop(.5,"#0af5f5"),t.addColorStop(.583,"#0a7ff5"),t.addColorStop(.66,"#0a0af5"),t.addColorStop(.75,"#7f0af5"),t.addColorStop(.833,"#f50af5"),t.addColorStop(.91,"#f50a7f"),t.addColorStop(1,"#f50a0a"),this.canvasContext.strokeStyle=t}},e=n.canvasContext;e.lineWidth=o.find(".toolbar .strokeSizeInputbox").val(),e.strokeStyle=o.find(".toolbar .colorSelectorButton").val(),e.lineCap="round",o.find(".toolbar .strokeSizeInputbox").on("change",function(){n.canvasContext.lineWidth=this.value}),o.find(".toolbar .colorSelectorButton").on("change",function(){n.canvasContext.strokeStyle=this.value}),o.find(".toolbar .refreshCanvasButton").on("click",function(){console.log("click the refresh canvas button."),initDrawingBoard(t)}),o.find(".toolbar .cleanCanvasButton").on("click",function(){n.canvasContext.fillStyle="#FFF",n.canvasContext.clearRect(0,0,n.canvasWidth,n.canvasHeight)}),a.ontouchstart=function(t){if(addDebugLog("touch start."),!(1<t.touches.length)){getDebugStatus()&&console.log(t.touches[0]),n.isTouching=!0;var o={x:t.touches[0].pageX-n.canvas.offsetLeft,y:t.touches[0].pageY-n.canvas.offsetTop};n.updateTouchPoint(o)}},a.ontouchend=function(t){addDebugLog("touch end."),getDebugStatus()&&console.log(t.touches[0]),n.isTouching=!1},a.ontouchmove=function(t){if(t.preventDefault(),addDebugLog("touch move."),!(1<t.touches.length)){getDebugStatus()&&console.log(t.touches[0]);var o={x:t.touches[0].pageX-n.canvas.offsetLeft,y:t.touches[0].pageY-n.canvas.offsetTop};n.isTouching&&n.touchPoint&&n.drawLine(n.touchPoint,o),n.updateTouchPoint(o)}};return n.setRainbowColor(),n}$(document).ready(function(){$(".drawingBoard").length&&(app.drawBoardList=[],$(".drawingBoard").each(function(){0!=this.offsetWidth&&0!=this.offsetHeight&&app.drawBoardList.push(initDrawingBoard(this))}))});